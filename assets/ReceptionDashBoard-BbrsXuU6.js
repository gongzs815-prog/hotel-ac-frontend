import{d as Y,r as g,c as j,a as F,p as Z,o as Q,e as n,m as a,f as e,h as C,w as E,v as N,g as _,F as R,k as O,n as I,t as o,u as k,i as K,j as J,q as W,s as G}from"./index-zUhguFMv.js";const P=!0,A="http://localhost:3000/api",V={AVAILABLE:"available",OCCUPIED:"occupied",CLEANING:"cleaning"},U={single:{label:"æ ‡å‡†å•äººæˆ¿",price:128},double:{label:"æ ‡å‡†åŒäººæˆ¿",price:168},king:{label:"å¤§åºŠæˆ¿",price:198}},z=Y("reception",()=>{const f=g([]),h=g(null),p=g(null),c=g(null),d=g([]),r=g(!1),m=j(()=>f.value.filter(t=>t.status===V.AVAILABLE)),b=j(()=>f.value.filter(t=>t.status===V.OCCUPIED)),i=j(()=>{const t={single:[],double:[],king:[]};return m.value.forEach(s=>{t[s.roomType]&&t[s.roomType].push(s)}),t}),$=j(()=>({total:f.value.length,available:m.value.length,occupied:b.value.length}));async function y(){try{if(r.value=!0,P){await new Promise(s=>setTimeout(s,500)),f.value=[{roomId:"301",status:"available",roomType:"single"},{roomId:"302",status:"available",roomType:"single"},{roomId:"303",status:"occupied",roomType:"double",customer:{name:"å¼ ä¸‰",phone:"13800138000",checkInTime:"2025-11-23T10:30:00Z"}},{roomId:"304",status:"available",roomType:"double"},{roomId:"305",status:"cleaning",roomType:"king"},{roomId:"401",status:"available",roomType:"king"},{roomId:"402",status:"occupied",roomType:"single",customer:{name:"æå››",phone:"13900139000",checkInTime:"2025-11-22T14:20:00Z"}},{roomId:"403",status:"available",roomType:"double"},{roomId:"404",status:"occupied",roomType:"king",customer:{name:"ç‹äº”",phone:"13700137000",checkInTime:"2025-11-24T08:15:00Z"}},{roomId:"405",status:"available",roomType:"single"}],console.log("âœ… [Mock] è·å–æˆ¿é—´åˆ—è¡¨æˆåŠŸ:",f.value.length,"ä¸ªæˆ¿é—´");return}const t=await F.get(`${A}/reception/rooms`);t.data.success&&(f.value=t.data.rooms,console.log("âœ… è·å–æˆ¿é—´åˆ—è¡¨æˆåŠŸ:",f.value.length,"ä¸ªæˆ¿é—´"))}catch(t){throw console.error("âŒ è·å–æˆ¿é—´åˆ—è¡¨å¤±è´¥:",t),t}finally{r.value=!1}}async function u(t={}){try{if(r.value=!0,console.log("ğŸ” æŸ¥è¯¢å¯ç”¨æˆ¿é—´:",t),P){await new Promise(x=>setTimeout(x,300));let v=f.value.filter(x=>x.status===V.AVAILABLE);return t.roomType&&t.roomType!=="all"&&(v=v.filter(x=>x.roomType===t.roomType)),console.log("âœ… [Mock] æŸ¥è¯¢åˆ°",v.length,"ä¸ªå¯ç”¨æˆ¿é—´"),v}const s=await F.get(`${A}/reception/available-rooms`,{params:t});return s.data.success?(console.log("âœ… æŸ¥è¯¢åˆ°",s.data.rooms.length,"ä¸ªå¯ç”¨æˆ¿é—´"),s.data.rooms):[]}catch(s){throw console.error("âŒ æŸ¥è¯¢å¯ç”¨æˆ¿é—´å¤±è´¥:",s),s}finally{r.value=!1}}async function w(t){try{if(r.value=!0,console.log("ğŸ“ åŠç†å…¥ä½:",t),P){await new Promise(x=>setTimeout(x,800));const v=f.value.findIndex(x=>x.roomId===t.roomId);return v!==-1&&(f.value[v].status=V.OCCUPIED,f.value[v].customer={name:t.customerName,phone:t.phone,checkInTime:new Date().toISOString()}),console.log("âœ… [Mock] å…¥ä½åŠç†æˆåŠŸ"),{success:!0,roomId:t.roomId,customerId:"CUST"+Date.now(),roomCardData:{cardNumber:t.roomId+"-CARD"}}}const s=await F.post(`${A}/reception/check-in`,t);if(s.data.success){console.log("âœ… å…¥ä½åŠç†æˆåŠŸ");const v=f.value.findIndex(x=>x.roomId===t.roomId);return v!==-1&&(f.value[v].status=V.OCCUPIED,f.value[v].customer={name:t.customerName,phone:t.phone,checkInTime:new Date().toISOString()}),{success:!0,roomId:t.roomId,customerId:s.data.customerId,roomCardData:s.data.roomCardData}}else throw new Error(s.data.message||"å…¥ä½åŠç†å¤±è´¥")}catch(s){throw console.error("âŒ å…¥ä½åŠç†å¤±è´¥:",s),s}finally{r.value=!1}}async function S(t){try{if(r.value=!0,console.log("ğŸ” æŸ¥è¯¢æˆ¿é—´å®¢æˆ·ä¿¡æ¯:",t),P){await new Promise(x=>setTimeout(x,300));const v=f.value.find(x=>x.roomId===t);if(v&&v.status===V.OCCUPIED&&v.customer){const x={customerId:"C"+t+Date.now().toString().slice(-6),name:v.customer.name,idCard:"110101199001011234",phone:v.customer.phone,checkInTime:v.customer.checkInTime,expectedCheckOutTime:new Date(new Date(v.customer.checkInTime).getTime()+864e5).toISOString()};return p.value=x,console.log("âœ… [Mock] æŸ¥è¯¢åˆ°å®¢æˆ·ä¿¡æ¯:",x),x}return console.log("âš ï¸ [Mock] è¯¥æˆ¿é—´æ— å®¢æˆ·ä¿¡æ¯"),null}const s=await F.get(`${A}/reception/customer/${t}`);return s.data.success?(p.value=s.data.customer,console.log("âœ… æŸ¥è¯¢åˆ°å®¢æˆ·ä¿¡æ¯"),s.data.customer):null}catch(s){throw console.error("âŒ æŸ¥è¯¢å®¢æˆ·ä¿¡æ¯å¤±è´¥:",s),s}finally{r.value=!1}}async function M(t){try{r.value=!0,console.log("ğŸ“„ ç”Ÿæˆè´¦å•:",t);const s=await F.post(`${A}/reception/generate-bill`,{roomId:t});if(s.data.success)return c.value={roomId:t,accommodationFee:s.data.accommodationFee,acFee:s.data.acFee,totalFee:s.data.totalFee,checkInTime:s.data.checkInTime,checkOutTime:s.data.checkOutTime,duration:s.data.duration,generatedAt:new Date().toISOString()},console.log("âœ… è´¦å•ç”ŸæˆæˆåŠŸ:",c.value),c.value;throw new Error(s.data.message||"è´¦å•ç”Ÿæˆå¤±è´¥")}catch(s){throw console.error("âŒ è´¦å•ç”Ÿæˆå¤±è´¥:",s),s}finally{r.value=!1}}async function D(t){try{r.value=!0,console.log("ğŸ“‹ è·å–è¯¦å•:",t);const s=await F.get(`${A}/reception/bill-detail/${t}`);return s.data.success?(d.value=s.data.details||[],console.log("âœ… è¯¦å•è·å–æˆåŠŸ:",d.value.length,"æ¡è®°å½•"),d.value):[]}catch(s){throw console.error("âŒ è·å–è¯¦å•å¤±è´¥:",s),s}finally{r.value=!1}}async function B(t,s,v="cash"){try{r.value=!0,console.log("ğŸ’° åŠç†ç»“è´¦:",t,s,v);const x=await F.post(`${A}/reception/check-out`,{roomId:t,amountPaid:s,paymentMethod:v});if(x.data.success){console.log("âœ… ç»“è´¦æˆåŠŸ");const H=f.value.findIndex(q=>q.roomId===t);return H!==-1&&(f.value[H].status=V.AVAILABLE,f.value[H].customer=null),c.value=null,d.value=[],p.value=null,{success:!0,transactionId:x.data.transactionId,receipt:x.data.receipt}}else throw new Error(x.data.message||"ç»“è´¦å¤±è´¥")}catch(x){throw console.error("âŒ ç»“è´¦å¤±è´¥:",x),x}finally{r.value=!1}}function T(t){h.value=t}function L(){h.value=null,p.value=null,c.value=null,d.value=[]}async function l(){try{r.value=!0,console.log("ğŸ”„ åˆå§‹åŒ–å‰å°æ•°æ®..."),await y(),console.log("âœ… å‰å°æ•°æ®åˆå§‹åŒ–å®Œæˆ")}catch(t){throw console.error("âŒ åˆå§‹åŒ–å¤±è´¥:",t),t}finally{r.value=!1}}return{rooms:f,selectedRoom:h,currentCustomer:p,currentBill:c,currentBillDetails:d,isLoading:r,availableRooms:m,occupiedRooms:b,availableRoomsByType:i,statistics:$,fetchAllRooms:y,fetchAvailableRooms:u,checkIn:w,fetchCustomerInfo:S,generateBill:M,fetchBillDetails:D,checkOut:B,selectRoom:T,clearSelection:L,initReceptionData:l}}),X={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ee={class:"space-y-4"},te={class:"grid grid-cols-2 gap-4"},se={class:"flex gap-2 mb-4"},le=["onClick"],oe={class:"bg-slate-900/50 rounded-lg p-4 max-h-64 overflow-y-auto"},ne={key:0,class:"text-center py-8 text-slate-500"},ae={key:1,class:"grid grid-cols-5 gap-2"},re=["onClick"],ie={class:"font-bold text-sm"},ce={class:"text-xs mt-1 opacity-70"},ue={key:0,class:"mt-4 p-4 bg-cyan-900/30 rounded-lg ring-1 ring-cyan-500/50"},de={class:"flex justify-between items-center"},ve={class:"text-white font-bold text-lg"},me={class:"text-cyan-400"},pe={class:"text-green-400 font-bold"},xe={class:"mt-8 flex justify-end gap-4"},ge=["disabled"],fe={key:0,class:"flex items-center"},he={key:1},be={__name:"CheckInForm",emits:["success","error"],setup(f,{emit:h}){const p=h,c=z(),d=g(!1),r=g("all"),m=g([]),b=g(!1),i=g({customerName:"",idCard:"",phone:"",checkInDate:new Date().toISOString().split("T")[0],checkOutDate:"",roomId:""}),$=[{id:"all",label:"å…¨éƒ¨"},{id:"single",label:"å•äººæˆ¿"},{id:"double",label:"åŒäººæˆ¿"},{id:"king",label:"å¤§åºŠæˆ¿"}],y=j(()=>r.value==="all"?m.value:m.value.filter(l=>l.roomType===r.value)),u=j(()=>m.value.find(l=>l.roomId===i.value.roomId)),w=j(()=>i.value.customerName.trim()!==""&&i.value.idCard.trim().length===18&&i.value.phone.trim().length===11&&i.value.checkInDate!==""&&i.value.roomId!=="");async function S(){try{b.value=!0;const l={checkInDate:i.value.checkInDate,checkOutDate:i.value.checkOutDate,roomType:r.value==="all"?void 0:r.value};m.value=await c.fetchAvailableRooms(l)}catch(l){console.error("æŸ¥è¯¢å¯ç”¨æˆ¿é—´å¤±è´¥:",l),p("error","æŸ¥è¯¢å¯ç”¨æˆ¿é—´å¤±è´¥")}finally{b.value=!1}}function M(l){return U[l]?.price||128}function D(l){return U[l]?.label||"æ ‡å‡†æˆ¿"}function B(l){i.value.roomId=l.roomId}function T(){i.value={customerName:"",idCard:"",phone:"",checkInDate:new Date().toISOString().split("T")[0],checkOutDate:"",roomId:""}}async function L(){if(!w.value){p("error","è¯·å¡«å†™å®Œæ•´çš„å…¥ä½ä¿¡æ¯");return}d.value=!0;try{const l=await c.checkIn(i.value);p("success",l),T()}catch(l){p("error",l.message||"å…¥ä½åŠç†å¤±è´¥")}finally{d.value=!1}}return Z([()=>i.value.checkInDate,()=>i.value.checkOutDate,r],()=>{S()}),Q(()=>{const l=new Date;l.setDate(l.getDate()+1),i.value.checkOutDate=l.toISOString().split("T")[0],S()}),(l,t)=>(a(),n("div",null,[t[16]||(t[16]=e("h2",{class:"text-xl font-semibold text-white mb-6 flex items-center"},[e("svg",{class:"w-6 h-6 mr-2 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})]),C(" åŠç†å…¥ä½ ")],-1)),e("div",X,[e("div",ee,[t[10]||(t[10]=e("h3",{class:"text-md font-medium text-slate-300 mb-3"},"å®¢æˆ·ä¿¡æ¯",-1)),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-slate-400 mb-1"},[C(" å®¢æˆ·å§“å "),e("span",{class:"text-red-400"},"*")],-1)),E(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value.customerName=s),type:"text",placeholder:"è¯·è¾“å…¥å®¢æˆ·å§“å",class:"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"},null,512),[[N,i.value.customerName]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-slate-400 mb-1"},[C(" èº«ä»½è¯å· "),e("span",{class:"text-red-400"},"*")],-1)),E(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.value.idCard=s),type:"text",placeholder:"è¯·è¾“å…¥èº«ä»½è¯å·",maxlength:"18",class:"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"},null,512),[[N,i.value.idCard]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-slate-400 mb-1"},[C(" è”ç³»ç”µè¯ "),e("span",{class:"text-red-400"},"*")],-1)),E(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.value.phone=s),type:"tel",placeholder:"è¯·è¾“å…¥è”ç³»ç”µè¯",maxlength:"11",class:"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"},null,512),[[N,i.value.phone]])]),e("div",te,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-slate-400 mb-1"},[C(" å…¥ä½æ—¥æœŸ "),e("span",{class:"text-red-400"},"*")],-1)),E(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>i.value.checkInDate=s),type:"date",class:"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"},null,512),[[N,i.value.checkInDate]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-slate-400 mb-1"}," é¢„è®¡é€€æˆ¿ ",-1)),E(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>i.value.checkOutDate=s),type:"date",class:"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"},null,512),[[N,i.value.checkOutDate]])])])]),e("div",null,[t[14]||(t[14]=e("h3",{class:"text-md font-medium text-slate-300 mb-3"},"é€‰æ‹©æˆ¿é—´",-1)),e("div",se,[(a(),n(R,null,O($,s=>e("button",{key:s.id,onClick:v=>r.value=s.id,class:I(["px-3 py-1.5 rounded-lg text-sm font-medium transition",r.value===s.id?"bg-cyan-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"])},o(s.label),11,le)),64))]),e("div",oe,[y.value.length===0?(a(),n("div",ne," æš‚æ— å¯ç”¨æˆ¿é—´ ")):(a(),n("div",ae,[(a(!0),n(R,null,O(y.value,s=>(a(),n("button",{key:s.roomId,onClick:v=>B(s),class:I(["p-3 rounded-lg text-center transition","ring-1",i.value.roomId===s.roomId?"bg-cyan-600 ring-cyan-500 text-white":"bg-slate-800 ring-slate-700 text-slate-300 hover:bg-slate-700"])},[e("div",ie,o(s.roomId),1),e("div",ce,"Â¥"+o(M(s.roomType)),1)],10,re))),128))]))]),i.value.roomId?(a(),n("div",ue,[e("div",de,[e("div",null,[t[11]||(t[11]=e("span",{class:"text-slate-400"},"å·²é€‰æˆ¿é—´ï¼š",-1)),e("span",ve,o(i.value.roomId),1)]),e("div",null,[t[12]||(t[12]=e("span",{class:"text-slate-400"},"æˆ¿å‹ï¼š",-1)),e("span",me,o(D(u.value?.roomType)),1)]),e("div",null,[t[13]||(t[13]=e("span",{class:"text-slate-400"},"æˆ¿ä»·ï¼š",-1)),e("span",pe,"Â¥"+o(M(u.value?.roomType))+"/æ™š",1)])])])):_("",!0)])]),e("div",xe,[e("button",{onClick:T,class:"px-6 py-2 rounded-lg font-medium bg-slate-700 text-slate-300 hover:bg-slate-600 transition"}," é‡ç½® "),e("button",{onClick:L,disabled:!w.value||d.value,class:I(["px-8 py-2 rounded-lg font-semibold text-white transition","disabled:opacity-50 disabled:cursor-not-allowed","bg-cyan-600 hover:bg-cyan-700 focus:ring-4 focus:ring-cyan-500/50"])},[d.value?(a(),n("span",fe,[...t[15]||(t[15]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1),C(" å¤„ç†ä¸­... ",-1)])])):(a(),n("span",he,"ç¡®è®¤å…¥ä½"))],8,ge)])]))}},ye={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},we={class:"lg:col-span-1"},ke={class:"bg-slate-900/50 rounded-lg p-4 max-h-96 overflow-y-auto"},_e={key:0,class:"text-center py-8 text-slate-500"},$e={key:1,class:"space-y-2"},Ce=["onClick"],Ie={class:"flex justify-between items-center"},Te={class:"font-bold"},Se={class:"text-xs text-slate-400"},De={class:"text-xs text-slate-500 mt-1"},Me={class:"lg:col-span-2"},Be={key:0,class:"text-center py-16 text-slate-500"},je={key:1},Re={class:"bg-slate-900/50 rounded-lg p-4 mb-4"},Oe={class:"grid grid-cols-2 gap-4 text-sm"},Le={class:"text-white"},Fe={class:"text-white"},Ae={class:"text-white"},Ve={class:"text-white"},Ee={class:"bg-slate-900/50 rounded-lg p-4 mb-4"},Ne={class:"flex justify-between items-center mb-3"},Pe=["disabled"],Ue={key:0,class:"text-center py-8"},ze={key:1,class:"space-y-3"},He={class:"flex justify-between py-2 border-b border-slate-700"},Ge={class:"text-white"},Qe={class:"text-xs text-slate-500 ml-1"},qe={class:"flex justify-between py-2 border-b border-slate-700"},Ye={class:"text-white"},Ze={class:"flex justify-between py-3 text-lg font-bold"},Ke={class:"text-green-400"},Je={key:2,class:"text-center py-8 text-slate-500"},We={key:0,class:"mb-4"},Xe={key:0,class:"mt-4 bg-slate-900/50 rounded-lg p-4"},et={key:0,class:"text-center py-4 text-slate-500 text-sm"},tt={key:1,class:"overflow-x-auto"},st={class:"w-full text-sm"},lt={class:"py-2 text-slate-300"},ot={class:"py-2 text-slate-300"},nt={class:"py-2 text-center"},at={class:"py-2 text-center text-cyan-400"},rt={class:"py-2 text-right text-green-400"},it={key:1,class:"bg-slate-900/50 rounded-lg p-4"},ct={class:"flex gap-3 mb-4"},ut=["onClick"],dt={class:"text-xl"},vt={class:"ml-2"},mt=["disabled"],pt={key:0},xt={key:1},gt={__name:"CheckOutPanel",emits:["success","error"],setup(f,{emit:h}){const p=h,c=z(),d=g(""),r=g(null),m=g(!1),b=g(!1),i=g(!1),$=g("cash"),y=[{id:"cash",label:"ç°é‡‘",icon:"ğŸ’µ"},{id:"wechat",label:"å¾®ä¿¡",icon:"ğŸ’š"},{id:"alipay",label:"æ”¯ä»˜å®",icon:"ğŸ’™"},{id:"card",label:"é“¶è¡Œå¡",icon:"ğŸ’³"}];async function u(l){d.value=l.roomId,m.value=!1,b.value=!1,c.clearSelection();try{i.value=!0;const t=await c.fetchCustomerInfo(l.roomId);r.value=t}catch{p("error","è·å–å®¢æˆ·ä¿¡æ¯å¤±è´¥")}finally{i.value=!1}}async function w(){try{i.value=!0,await c.generateBill(d.value),await c.fetchBillDetails(d.value),m.value=!0}catch(l){p("error",l.message||"ç”Ÿæˆè´¦å•å¤±è´¥")}finally{i.value=!1}}async function S(){if(!c.currentBill){p("error","è¯·å…ˆç”Ÿæˆè´¦å•");return}try{i.value=!0;const l=d.value,t=await c.checkOut(l,c.currentBill.totalFee,$.value);d.value="",r.value=null,m.value=!1,b.value=!1,p("success",{roomId:l,...t})}catch(l){p("error",l.message||"ç»“è´¦å¤±è´¥")}finally{i.value=!1}}function M(l){if(!l)return"--";const t=new Date(l);return`${t.getMonth()+1}/${t.getDate()}`}function D(l){if(!l)return"--";const t=new Date(l);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function B(l){if(!l)return"--";const t=new Date(l);return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function T(l){return{Low:"ä½é£",Mid:"ä¸­é£",High:"é«˜é£"}[l]||l}function L(l){return{Low:"text-blue-400",Mid:"text-yellow-400",High:"text-red-400"}[l]||"text-slate-400"}return(l,t)=>(a(),n("div",null,[t[19]||(t[19]=e("h2",{class:"text-xl font-semibold text-white mb-6 flex items-center"},[e("svg",{class:"w-6 h-6 mr-2 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})]),C(" åŠç†ç»“è´¦ ")],-1)),e("div",ye,[e("div",we,[t[1]||(t[1]=e("h3",{class:"text-md font-medium text-slate-300 mb-3"},"é€‰æ‹©é€€æˆ¿æˆ¿é—´",-1)),e("div",ke,[k(c).occupiedRooms.length===0?(a(),n("div",_e," æš‚æ— å·²å…¥ä½æˆ¿é—´ ")):(a(),n("div",$e,[(a(!0),n(R,null,O(k(c).occupiedRooms,s=>(a(),n("button",{key:s.roomId,onClick:v=>u(s),class:I(["w-full p-3 rounded-lg text-left transition","ring-1",d.value===s.roomId?"bg-cyan-600/20 ring-cyan-500 text-white":"bg-slate-800 ring-slate-700 text-slate-300 hover:bg-slate-700"])},[e("div",Ie,[e("span",Te,o(s.roomId),1),e("span",Se,o(s.customer?.name||"æœªçŸ¥"),1)]),e("div",De," å…¥ä½æ—¶é—´: "+o(M(s.customer?.checkInTime)),1)],10,Ce))),128))]))])]),e("div",Me,[d.value?(a(),n("div",je,[e("div",Re,[t[7]||(t[7]=e("h3",{class:"text-md font-medium text-slate-300 mb-3"},"å®¢æˆ·ä¿¡æ¯",-1)),e("div",Oe,[e("div",null,[t[3]||(t[3]=e("span",{class:"text-slate-500"},"å®¢æˆ·å§“åï¼š",-1)),e("span",Le,o(r.value?.name||"--"),1)]),e("div",null,[t[4]||(t[4]=e("span",{class:"text-slate-500"},"è”ç³»ç”µè¯ï¼š",-1)),e("span",Fe,o(r.value?.phone||"--"),1)]),e("div",null,[t[5]||(t[5]=e("span",{class:"text-slate-500"},"å…¥ä½æ—¶é—´ï¼š",-1)),e("span",Ae,o(D(r.value?.checkInTime)),1)]),e("div",null,[t[6]||(t[6]=e("span",{class:"text-slate-500"},"é€€æˆ¿æ—¶é—´ï¼š",-1)),e("span",Ve,o(D(new Date)),1)])])]),e("div",Ee,[e("div",Ne,[t[8]||(t[8]=e("h3",{class:"text-md font-medium text-slate-300"},"è´¹ç”¨æ˜ç»†",-1)),m.value?_("",!0):(a(),n("button",{key:0,onClick:w,disabled:i.value,class:"px-3 py-1 text-sm bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition disabled:opacity-50"}," ç”Ÿæˆè´¦å• ",8,Pe))]),i.value?(a(),n("div",Ue,[...t[9]||(t[9]=[e("svg",{class:"animate-spin h-8 w-8 mx-auto text-cyan-400",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1),e("p",{class:"mt-2 text-slate-500"},"æ­£åœ¨ç”Ÿæˆè´¦å•...",-1)])])):m.value?(a(),n("div",ze,[e("div",He,[t[10]||(t[10]=e("span",{class:"text-slate-400"},"ä½å®¿è´¹ç”¨",-1)),e("span",Ge,[C(" Â¥"+o(k(c).currentBill?.accommodationFee?.toFixed(2)||"0.00")+" ",1),e("span",Qe,"("+o(k(c).currentBill?.duration||0)+"å¤©)",1)])]),e("div",qe,[t[11]||(t[11]=e("span",{class:"text-slate-400"},"ç©ºè°ƒè´¹ç”¨",-1)),e("span",Ye,"Â¥"+o(k(c).currentBill?.acFee?.toFixed(2)||"0.00"),1)]),e("div",Ze,[t[12]||(t[12]=e("span",{class:"text-white"},"åˆè®¡",-1)),e("span",Ke,"Â¥"+o(k(c).currentBill?.totalFee?.toFixed(2)||"0.00"),1)])])):(a(),n("div",Je,[...t[13]||(t[13]=[e("p",null,'ç‚¹å‡»"ç”Ÿæˆè´¦å•"æŸ¥çœ‹è´¹ç”¨æ˜ç»†',-1)])]))]),m.value?(a(),n("div",We,[e("button",{onClick:t[0]||(t[0]=s=>b.value=!b.value),class:"w-full px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg transition flex items-center justify-center gap-2"},[(a(),n("svg",{class:I(["w-4 h-4 transition",b.value?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),C(" "+o(b.value?"æ”¶èµ·è¯¦å•":"æŸ¥çœ‹ç©ºè°ƒä½¿ç”¨è¯¦å•"),1)]),b.value?(a(),n("div",Xe,[t[16]||(t[16]=e("h4",{class:"text-sm font-medium text-slate-300 mb-3"},"ç©ºè°ƒä½¿ç”¨è¯¦å•",-1)),k(c).currentBillDetails.length===0?(a(),n("div",et," æš‚æ— ç©ºè°ƒä½¿ç”¨è®°å½• ")):(a(),n("div",tt,[e("table",st,[t[15]||(t[15]=e("thead",null,[e("tr",{class:"text-slate-500 border-b border-slate-700"},[e("th",{class:"text-left py-2"},"å¼€å§‹æ—¶é—´"),e("th",{class:"text-left py-2"},"ç»“æŸæ—¶é—´"),e("th",{class:"text-center py-2"},"é£é€Ÿ"),e("th",{class:"text-center py-2"},"æ¸©åº¦"),e("th",{class:"text-right py-2"},"è´¹ç”¨")])],-1)),e("tbody",null,[(a(!0),n(R,null,O(k(c).currentBillDetails,(s,v)=>(a(),n("tr",{key:v,class:"border-b border-slate-800"},[e("td",lt,o(B(s.startTime)),1),e("td",ot,o(B(s.endTime)),1),e("td",nt,[e("span",{class:I(L(s.fanSpeed))},o(T(s.fanSpeed)),3)]),e("td",at,o(s.targetTemp)+"Â°C",1),e("td",rt,"Â¥"+o(s.fee?.toFixed(2)),1)]))),128))])])]))])):_("",!0)])):_("",!0),m.value?(a(),n("div",it,[t[18]||(t[18]=e("h3",{class:"text-md font-medium text-slate-300 mb-3"},"æ”¯ä»˜æ–¹å¼",-1)),e("div",ct,[(a(),n(R,null,O(y,s=>e("button",{key:s.id,onClick:v=>$.value=s.id,class:I(["flex-1 py-3 rounded-lg font-medium transition ring-1",$.value===s.id?"bg-cyan-600/20 ring-cyan-500 text-cyan-400":"bg-slate-800 ring-slate-700 text-slate-400 hover:bg-slate-700"])},[e("span",dt,o(s.icon),1),e("span",vt,o(s.label),1)],10,ut)),64))]),e("button",{onClick:S,disabled:i.value,class:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition disabled:opacity-50 flex items-center justify-center gap-2"},[i.value?(a(),n("span",pt,[...t[17]||(t[17]=[e("svg",{class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)])])):(a(),n("span",xt,"ç¡®è®¤ç»“è´¦ (Â¥"+o(k(c).currentBill?.totalFee?.toFixed(2)||"0.00")+")",1))],8,mt)])):_("",!0)])):(a(),n("div",Be,[...t[2]||(t[2]=[e("svg",{class:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),e("p",null,"è¯·é€‰æ‹©è¦é€€æˆ¿çš„æˆ¿é—´",-1)])]))])])]))}},ft={class:"flex flex-wrap gap-4 mb-6"},ht={class:"flex gap-2"},bt=["onClick"],yt={class:"ml-1 opacity-70"},wt={class:"flex-1 min-w-48"},kt={class:"relative"},_t={class:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-3"},$t=["onClick"],Ct={class:"font-bold text-white"},It={class:"flex justify-center my-1"},Tt={class:"text-xs text-slate-500"},St={key:0,class:"text-xs text-cyan-400 mt-1 truncate"},Dt={key:0,class:"text-center py-16 text-slate-500"},Mt={class:"bg-slate-800 rounded-xl ring-1 ring-white/10 p-6 w-full max-w-md mx-4"},Bt={class:"flex justify-between items-center mb-4"},jt={class:"text-lg font-semibold text-white"},Rt={class:"space-y-3 text-sm"},Ot={class:"flex justify-between"},Lt={class:"flex justify-between"},Ft={class:"text-white"},At={class:"flex justify-between"},Vt={class:"text-green-400"},Et={key:0,class:"pt-3 border-t border-slate-700"},Nt={class:"text-slate-300 font-medium mb-3 flex items-center justify-between"},Pt={key:0,class:"text-xs text-cyan-400 flex items-center"},Ut={key:0,class:"space-y-2"},zt={class:"flex justify-between"},Ht={class:"text-white font-mono text-sm"},Gt={class:"flex justify-between"},Qt={class:"text-white"},qt={class:"flex justify-between"},Yt={class:"text-white font-mono text-sm"},Zt={class:"flex justify-between"},Kt={class:"text-white"},Jt={class:"flex justify-between"},Wt={class:"text-white"},Xt={class:"flex justify-between"},es={class:"text-white"},ts={key:1,class:"space-y-2"},ss={class:"flex justify-between"},ls={class:"text-white"},os={class:"flex justify-between"},ns={class:"text-white"},as={class:"flex justify-between"},rs={class:"text-white"},is={class:"mt-6"},cs={__name:"RoomQueryPanel",setup(f){const h=z(),p=g("all"),c=g("all"),d=g(""),r=g(null),m=g(null),b=g(!1),i=[{id:"all",label:"å…¨éƒ¨"},{id:"available",label:"ç©ºé—²"},{id:"occupied",label:"å·²å…¥ä½"},{id:"cleaning",label:"æ¸…æ´ä¸­"}],$=j(()=>{let l=h.rooms;if(p.value!=="all"&&(l=l.filter(t=>t.status===p.value)),c.value!=="all"&&(l=l.filter(t=>t.roomType===c.value)),d.value.trim()){const t=d.value.trim().toLowerCase();l=l.filter(s=>s.roomId.toLowerCase().includes(t)||s.customer?.name?.toLowerCase().includes(t))}return l});function y(l){return l==="all"?h.rooms.length:h.rooms.filter(t=>t.status===l).length}function u(l){switch(l.status){case"available":return"bg-green-900/20 ring-green-500/50 hover:ring-green-500";case"occupied":return"bg-cyan-900/20 ring-cyan-500/50 hover:ring-cyan-500";case"cleaning":return"bg-yellow-900/20 ring-yellow-500/50 hover:ring-yellow-500";default:return"bg-slate-900/50 ring-slate-700"}}function w(l){switch(l.status){case"available":return"bg-green-500";case"occupied":return"bg-cyan-500";case"cleaning":return"bg-yellow-500";default:return"bg-slate-600"}}function S(l){return{available:"ç©ºé—²å¯ç”¨",occupied:"å·²å…¥ä½",cleaning:"æ¸…æ´ä¸­"}[l]||"æœªçŸ¥"}function M(l){switch(l.status){case"available":return"text-green-400";case"occupied":return"text-cyan-400";case"cleaning":return"text-yellow-400";default:return"text-slate-400"}}function D(l){return U[l]?.label||"æ ‡å‡†æˆ¿"}function B(l){return U[l]?.price||128}function T(l){if(!l)return"--";const t=new Date(l);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}async function L(l){if(r.value=l,m.value=null,l.status==="occupied")try{b.value=!0,m.value=await h.fetchCustomerInfo(l.roomId)}catch(t){console.error("è·å–å®¢æˆ·ä¿¡æ¯å¤±è´¥:",t)}finally{b.value=!1}}return(l,t)=>(a(),n("div",null,[t[23]||(t[23]=e("h2",{class:"text-xl font-semibold text-white mb-6 flex items-center"},[e("svg",{class:"w-6 h-6 mr-2 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})]),C(" æˆ¿é—´æŸ¥è¯¢ ")],-1)),e("div",ft,[e("div",ht,[(a(),n(R,null,O(i,s=>e("button",{key:s.id,onClick:v=>p.value=s.id,class:I(["px-4 py-2 rounded-lg text-sm font-medium transition",p.value===s.id?"bg-cyan-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"])},[C(o(s.label)+" ",1),e("span",yt,"("+o(y(s.id))+")",1)],10,bt)),64))]),e("div",wt,[e("div",kt,[E(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),type:"text",placeholder:"æœç´¢æˆ¿é—´å·...",class:"w-full px-4 py-2 pl-10 bg-slate-900 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"},null,512),[[N,d.value]]),t[5]||(t[5]=e("svg",{class:"w-5 h-5 absolute left-3 top-2.5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),E(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),class:"px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"},[...t[6]||(t[6]=[e("option",{value:"all"},"å…¨éƒ¨æˆ¿å‹",-1),e("option",{value:"single"},"å•äººæˆ¿",-1),e("option",{value:"double"},"åŒäººæˆ¿",-1),e("option",{value:"king"},"å¤§åºŠæˆ¿",-1)])],512),[[J,c.value]])]),e("div",_t,[(a(!0),n(R,null,O($.value,s=>(a(),n("div",{key:s.roomId,onClick:v=>L(s),class:I(["p-3 rounded-lg text-center cursor-pointer transition-all hover:scale-105","ring-1",u(s)])},[e("div",Ct,o(s.roomId),1),e("div",It,[e("div",{class:I(["w-2 h-2 rounded-full",w(s)])},null,2)]),e("div",Tt,o(D(s.roomType)),1),s.status==="occupied"?(a(),n("div",St,o(s.customer?.name||"å·²å…¥ä½"),1)):_("",!0)],10,$t))),128))]),$.value.length===0?(a(),n("div",Dt,[...t[7]||(t[7]=[e("svg",{class:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",null,"æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æˆ¿é—´",-1)])])):_("",!0),t[24]||(t[24]=K('<div class="flex flex-wrap gap-6 mt-6 pt-4 border-t border-slate-700 text-sm text-slate-500"><div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-green-500"></div><span>ç©ºé—²å¯ç”¨</span></div><div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-cyan-500"></div><span>å·²å…¥ä½</span></div><div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-yellow-500"></div><span>æ¸…æ´ä¸­</span></div></div>',1)),r.value?(a(),n("div",{key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t[4]||(t[4]=W(s=>r.value=null,["self"]))},[e("div",Mt,[e("div",Bt,[e("h3",jt,"æˆ¿é—´ "+o(r.value.roomId),1),e("button",{onClick:t[2]||(t[2]=s=>r.value=null),class:"text-slate-400 hover:text-white"},[...t[8]||(t[8]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Rt,[e("div",Ot,[t[9]||(t[9]=e("span",{class:"text-slate-400"},"æˆ¿é—´çŠ¶æ€",-1)),e("span",{class:I(M(r.value))},o(S(r.value.status)),3)]),e("div",Lt,[t[10]||(t[10]=e("span",{class:"text-slate-400"},"æˆ¿é—´ç±»å‹",-1)),e("span",Ft,o(D(r.value.roomType)),1)]),e("div",At,[t[11]||(t[11]=e("span",{class:"text-slate-400"},"æˆ¿é—´ä»·æ ¼",-1)),e("span",Vt,"Â¥"+o(B(r.value.roomType))+"/æ™š",1)]),r.value.status==="occupied"?(a(),n("div",Et,[e("div",Nt,[t[13]||(t[13]=e("span",null,"å…¥ä½å®¢æˆ·",-1)),b.value?(a(),n("span",Pt,[...t[12]||(t[12]=[e("svg",{class:"animate-spin h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1),C(" åŠ è½½ä¸­... ",-1)])])):_("",!0)]),m.value?(a(),n("div",Ut,[e("div",zt,[t[14]||(t[14]=e("span",{class:"text-slate-400"},"å®¢æˆ·ç¼–å·",-1)),e("span",Ht,o(m.value.customerId),1)]),e("div",Gt,[t[15]||(t[15]=e("span",{class:"text-slate-400"},"å®¢æˆ·å§“å",-1)),e("span",Qt,o(m.value.name),1)]),e("div",qt,[t[16]||(t[16]=e("span",{class:"text-slate-400"},"èº«ä»½è¯å·",-1)),e("span",Yt,o(m.value.idCard),1)]),e("div",Zt,[t[17]||(t[17]=e("span",{class:"text-slate-400"},"è”ç³»ç”µè¯",-1)),e("span",Kt,o(m.value.phone),1)]),e("div",Jt,[t[18]||(t[18]=e("span",{class:"text-slate-400"},"å…¥ä½æ—¶é—´",-1)),e("span",Wt,o(T(m.value.checkInTime)),1)]),e("div",Xt,[t[19]||(t[19]=e("span",{class:"text-slate-400"},"é¢„è®¡é€€æˆ¿",-1)),e("span",es,o(T(m.value.expectedCheckOutTime)),1)])])):b.value?_("",!0):(a(),n("div",ts,[e("div",ss,[t[20]||(t[20]=e("span",{class:"text-slate-400"},"å®¢æˆ·å§“å",-1)),e("span",ls,o(r.value.customer?.name||"--"),1)]),e("div",os,[t[21]||(t[21]=e("span",{class:"text-slate-400"},"è”ç³»ç”µè¯",-1)),e("span",ns,o(r.value.customer?.phone||"--"),1)]),e("div",as,[t[22]||(t[22]=e("span",{class:"text-slate-400"},"å…¥ä½æ—¶é—´",-1)),e("span",rs,o(T(r.value.customer?.checkInTime)),1)])]))])):_("",!0)]),e("div",is,[e("button",{onClick:t[3]||(t[3]=s=>r.value=null),class:"w-full px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition"}," å…³é—­ ")])])])):_("",!0)]))}},us={class:"min-h-screen bg-slate-900 text-slate-300 p-6"},ds={class:"mb-6"},vs={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},ms={class:"flex items-center gap-4 bg-slate-800 p-3 rounded-xl ring-1 ring-white/10"},ps={class:"text-center px-3"},xs={class:"text-lg font-bold text-white"},gs={class:"text-center px-3"},fs={class:"text-lg font-bold text-green-400"},hs={class:"text-center px-3"},bs={class:"text-lg font-bold text-cyan-400"},ys=["disabled"],ws={key:0,class:"mt-4 p-3 bg-red-500/10 border border-red-500/50 rounded-lg text-red-400 text-sm flex items-center justify-between"},ks={class:"flex items-center"},_s={key:1,class:"mt-4 p-3 bg-green-500/10 border border-green-500/50 rounded-lg text-green-400 text-sm flex items-center justify-between"},$s={class:"flex items-center"},Cs={class:"mb-6"},Is={class:"flex space-x-2 bg-slate-800 p-1 rounded-xl w-fit"},Ts=["onClick"],Ss={class:"text-xl"},Ds={class:"bg-slate-800 rounded-xl ring-1 ring-white/10 p-6"},Ms={key:0},Bs={key:1},js={key:2},Os={__name:"ReceptionDashBoard",setup(f){const h=z(),p=g("checkIn"),c=g(""),d=g(""),r=[{id:"checkIn",label:"åŠç†å…¥ä½",icon:"ğŸ“"},{id:"checkOut",label:"åŠç†ç»“è´¦",icon:"ğŸ’°"},{id:"roomQuery",label:"æˆ¿é—´æŸ¥è¯¢",icon:"ğŸ”"}];async function m(){try{await h.initReceptionData(),d.value="æ•°æ®å·²åˆ·æ–°",setTimeout(()=>d.value="",2e3)}catch(y){c.value="åˆ·æ–°å¤±è´¥: "+(y.message||"æœªçŸ¥é”™è¯¯")}}function b(y){d.value=`æˆ¿é—´ ${y.roomId} å…¥ä½åŠç†æˆåŠŸï¼`,setTimeout(()=>d.value="",3e3)}function i(y){d.value=`æˆ¿é—´ ${y.roomId} ç»“è´¦å®Œæˆï¼äº¤æ˜“å·: ${y.transactionId}`,setTimeout(()=>d.value="",3e3)}function $(y){c.value=y}return Q(async()=>{console.log("ğŸ¨ å‰å°æœåŠ¡å°åŠ è½½...");try{await h.initReceptionData()}catch{c.value="åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•"}}),(y,u)=>(a(),n("div",us,[e("header",ds,[e("div",vs,[u[9]||(u[9]=e("div",null,[e("h1",{class:"text-2xl font-bold text-white flex items-center"},[e("svg",{class:"w-8 h-8 mr-3 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),C(" å‰å°æœåŠ¡å° ")]),e("p",{class:"text-slate-500 text-sm mt-1"},"åŠç†å…¥ä½ä¸ç»“è´¦æœåŠ¡")],-1)),e("div",ms,[e("div",ps,[e("div",xs,o(k(h).statistics.total),1),u[2]||(u[2]=e("div",{class:"text-xs text-slate-500"},"æ€»æˆ¿é—´",-1))]),u[6]||(u[6]=e("div",{class:"w-px h-8 bg-slate-700"},null,-1)),e("div",gs,[e("div",fs,o(k(h).statistics.available),1),u[3]||(u[3]=e("div",{class:"text-xs text-slate-500"},"ç©ºé—²",-1))]),u[7]||(u[7]=e("div",{class:"w-px h-8 bg-slate-700"},null,-1)),e("div",hs,[e("div",bs,o(k(h).statistics.occupied),1),u[4]||(u[4]=e("div",{class:"text-xs text-slate-500"},"å·²å…¥ä½",-1))]),u[8]||(u[8]=e("div",{class:"w-px h-8 bg-slate-700"},null,-1)),e("button",{onClick:m,disabled:k(h).isLoading,class:"p-2 rounded-lg bg-slate-700 hover:bg-slate-600 transition disabled:opacity-50",title:"åˆ·æ–°æ•°æ®"},[(a(),n("svg",{class:I(["w-5 h-5",k(h).isLoading?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...u[5]||(u[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2))],8,ys)])]),c.value?(a(),n("div",ws,[e("div",ks,[u[10]||(u[10]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,o(c.value),1)]),e("button",{onClick:u[0]||(u[0]=w=>c.value=""),class:"text-red-400 hover:text-red-300"},[...u[11]||(u[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):_("",!0),d.value?(a(),n("div",_s,[e("div",$s,[u[12]||(u[12]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,o(d.value),1)]),e("button",{onClick:u[1]||(u[1]=w=>d.value=""),class:"text-green-400 hover:text-green-300"},[...u[13]||(u[13]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):_("",!0)]),e("div",Cs,[e("div",Is,[(a(),n(R,null,O(r,w=>e("button",{key:w.id,onClick:S=>p.value=w.id,class:I(["px-6 py-3 rounded-lg font-medium transition flex items-center gap-2",p.value===w.id?"bg-cyan-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-slate-700"])},[e("span",Ss,o(w.icon),1),e("span",null,o(w.label),1)],10,Ts)),64))])]),e("div",Ds,[p.value==="checkIn"?(a(),n("div",Ms,[G(be,{onSuccess:b,onError:$})])):p.value==="checkOut"?(a(),n("div",Bs,[G(gt,{onSuccess:i,onError:$})])):p.value==="roomQuery"?(a(),n("div",js,[G(cs)])):_("",!0)])]))}};export{Os as default};

import{d as W,r as g,c as C,l as F,a as _,_ as H,o as q,b as G,e as i,f as t,g as I,h as w,n as b,u as r,t as l,i as N,w as P,v as U,j as J,F as B,k as E,m as d}from"./index-DbGSvMxY.js";const k="http://localhost:3000/api",K="http://localhost:3000",L={IDLE:"idle",SERVING:"serving",WAITING:"waiting"},V={COOLING:"Cooling",HEATING:"Heating"},X=W("admin",()=>{const x=g({isRunning:!1,mode:V.COOLING,maxServing:30,currentServing:0}),s=g({}),u=g([]),c=g([]);let a=null;const v=g(!1),m=g(!1),y=C(()=>Object.values(s.value).sort((e,o)=>parseInt(e.roomId)-parseInt(o.roomId))),j=C(()=>y.value.filter(e=>e.isPowerOn).length),T=C(()=>u.value.length),O=C(()=>c.value.length);function $(){if(a&&v.value){console.log("WebSocket å·²è¿æ¥");return}try{a=F(K,{transports:["websocket"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5}),a.on("connect",()=>{console.log("âœ… [ç®¡ç†å‘˜] WebSocket è¿æ¥æˆåŠŸ"),v.value=!0,a.emit("join-admin")}),a.on("temperature-update",e=>{s.value[e.roomId]&&(s.value[e.roomId].currentTemp=e.currentTemp)}),a.on("fee-update",e=>{s.value[e.roomId]&&(s.value[e.roomId].totalFee=e.totalFee)}),a.on("status-change",e=>{s.value[e.roomId]&&(s.value[e.roomId].status=e.status,e.waitTime!==void 0&&(s.value[e.roomId].waitTime=e.waitTime)),f()}),a.on("service-started",e=>{s.value[e.roomId]&&(s.value[e.roomId].status=L.SERVING),f()}),a.on("service-stopped",e=>{s.value[e.roomId]&&(s.value[e.roomId].status=L.IDLE,s.value[e.roomId].isPowerOn=!1),f()}),a.on("room-power-on",e=>{s.value[e.roomId]&&(s.value[e.roomId].isPowerOn=!0,s.value[e.roomId].status=e.status||L.SERVING),f()}),a.on("room-power-off",e=>{s.value[e.roomId]&&(s.value[e.roomId].isPowerOn=!1,s.value[e.roomId].status=L.IDLE),f()}),a.on("queue-update",e=>{e.serviceQueue&&(u.value=e.serviceQueue),e.waitingQueue&&(c.value=e.waitingQueue)}),a.on("central-ac-status",e=>{x.value={...x.value,...e}}),a.on("disconnect",e=>{console.log("âŒ [ç®¡ç†å‘˜] WebSocket æ–­å¼€:",e),v.value=!1}),a.on("connect_error",e=>{console.error("âš ï¸ [ç®¡ç†å‘˜] WebSocket é”™è¯¯:",e),v.value=!1})}catch(e){console.error("âŒ WebSocket åˆå§‹åŒ–å¤±è´¥:",e)}}function S(){a&&(a.emit("leave-admin"),a.disconnect(),a=null,v.value=!1,console.log("ğŸ”Œ [ç®¡ç†å‘˜] WebSocket å·²æ–­å¼€"))}async function A(){try{m.value=!0;const e=await _.get(`${k}/admin/rooms`);if(e.data.success){const o={};e.data.rooms.forEach(p=>{o[p.roomId]=p}),s.value=o,console.log("âœ… è·å–æˆ¿é—´åˆ—è¡¨æˆåŠŸ:",e.data.rooms.length,"ä¸ªæˆ¿é—´")}}catch(e){throw console.error("âŒ è·å–æˆ¿é—´åˆ—è¡¨å¤±è´¥:",e),e}finally{m.value=!1}}async function R(){try{const e=await _.get(`${k}/admin/central-ac/status`);e.data.success&&(x.value={isRunning:e.data.isRunning,mode:e.data.mode||V.COOLING,maxServing:e.data.maxServing||30,currentServing:e.data.currentServing||0},console.log("âœ… è·å–ä¸­å¤®ç©ºè°ƒçŠ¶æ€æˆåŠŸ"))}catch(e){throw console.error("âŒ è·å–ä¸­å¤®ç©ºè°ƒçŠ¶æ€å¤±è´¥:",e),e}}async function D(e=V.COOLING){try{const o=await _.post(`${k}/admin/central-ac/start`,{mode:e});if(o.data.success)return x.value.isRunning=!0,x.value.mode=e,console.log("âœ… ä¸­å¤®ç©ºè°ƒå·²å¯åŠ¨ï¼Œæ¨¡å¼:",e),!0;throw new Error(o.data.message||"å¯åŠ¨å¤±è´¥")}catch(o){throw console.error("âŒ å¯åŠ¨ä¸­å¤®ç©ºè°ƒå¤±è´¥:",o),o}}async function M(){try{const e=await _.post(`${k}/admin/central-ac/stop`);if(e.data.success)return x.value.isRunning=!1,console.log("âœ… ä¸­å¤®ç©ºè°ƒå·²å…³é—­"),!0;throw new Error(e.data.message||"å…³é—­å¤±è´¥")}catch(e){throw console.error("âŒ å…³é—­ä¸­å¤®ç©ºè°ƒå¤±è´¥:",e),e}}async function f(){try{const[e,o]=await Promise.all([_.get(`${k}/admin/service-queue`),_.get(`${k}/admin/waiting-queue`)]);e.data.success&&(u.value=e.data.queue||[]),o.data.success&&(c.value=o.data.queue||[]),console.log("âœ… é˜Ÿåˆ—æ•°æ®å·²æ›´æ–°")}catch(e){console.error("âŒ è·å–é˜Ÿåˆ—å¤±è´¥:",e)}}async function n(){try{m.value=!0,console.log("ğŸ”„ åˆå§‹åŒ–ç®¡ç†å‘˜æ•°æ®..."),await Promise.all([R(),A(),f()]),console.log("âœ… ç®¡ç†å‘˜æ•°æ®åˆå§‹åŒ–å®Œæˆ")}catch(e){throw console.error("âŒ åˆå§‹åŒ–å¤±è´¥:",e),e}finally{m.value=!1}}return{centralACStatus:x,rooms:s,serviceQueue:u,waitingQueue:c,isConnected:v,isLoading:m,roomList:y,activeRoomCount:j,servingRoomCount:T,waitingRoomCount:O,connectWebSocket:$,disconnectWebSocket:S,fetchAllRooms:A,fetchCentralACStatus:R,startCentralAC:D,stopCentralAC:M,fetchQueues:f,initAdminData:n}}),Y={class:"min-h-screen bg-slate-900 text-slate-300 p-6"},Z={class:"mb-6"},ee={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},te={class:"flex items-center gap-4 bg-slate-800 p-4 rounded-xl ring-1 ring-white/10"},se={class:"flex items-center gap-2"},oe={class:"font-medium"},ne={class:"flex items-center gap-2"},le=["disabled"],ae=["disabled"],re=["disabled"],ie={key:0,class:"flex items-center"},de={key:1},ce={key:0,class:"mt-4 p-3 bg-yellow-500/10 border border-yellow-500/50 rounded-lg text-yellow-400 text-sm flex items-center"},ue={key:1,class:"mt-4 p-3 bg-red-500/10 border border-red-500/50 rounded-lg text-red-400 text-sm flex items-center justify-between"},ve={class:"flex items-center"},ge={class:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"},me={class:"bg-slate-800 p-4 rounded-xl ring-1 ring-white/10"},fe={class:"text-2xl font-bold text-white mt-1"},xe={class:"bg-slate-800 p-4 rounded-xl ring-1 ring-white/10"},pe={class:"text-2xl font-bold text-cyan-400 mt-1"},he={class:"bg-slate-800 p-4 rounded-xl ring-1 ring-white/10"},we={class:"text-2xl font-bold text-green-400 mt-1"},be={class:"bg-slate-800 p-4 rounded-xl ring-1 ring-white/10"},ye={class:"text-2xl font-bold text-yellow-400 mt-1"},_e={class:"bg-slate-800 p-4 rounded-xl ring-1 ring-white/10"},ke={class:"text-2xl font-bold text-green-400 mt-1"},Ce={class:"flex flex-col lg:flex-row gap-6"},Se={class:"flex-1"},Ie={class:"bg-slate-800 rounded-xl ring-1 ring-white/10 p-4"},Ae={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4"},Re={class:"text-lg font-semibold text-white flex items-center"},Me={class:"ml-2 text-sm font-normal text-slate-500"},Le={class:"flex items-center gap-2"},je={class:"relative"},Te={key:0,class:"absolute right-2 top-2 w-4 h-4 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Oe=["disabled"],$e={key:0,class:"flex items-center justify-center py-20"},De={key:1,class:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-2"},Be=["title"],Ee={class:"text-xs font-bold text-white"},Ve={class:"flex justify-center my-1"},Qe={key:0,class:"text-xs text-slate-400"},Ne={key:1,class:"text-xs text-slate-600"},Pe={key:2,class:"flex flex-col items-center justify-center py-20 text-slate-500"},ze={class:"w-full lg:w-80 space-y-4"},We={class:"bg-slate-800 rounded-xl ring-1 ring-white/10 p-4"},Fe={class:"text-md font-semibold text-white mb-3 flex items-center justify-between"},He={class:"text-sm font-normal text-slate-500"},qe={key:0,class:"text-center py-6 text-slate-500 text-sm"},Ge={key:1,class:"space-y-2 max-h-64 overflow-y-auto"},Ue={class:"flex items-center gap-2"},Je={class:"font-medium text-sm"},Ke={class:"text-right text-xs"},Xe={class:"text-slate-400"},Ye={class:"text-cyan-400"},Ze={key:0,class:"text-slate-500 mt-0.5"},et={class:"bg-slate-800 rounded-xl ring-1 ring-white/10 p-4"},tt={class:"text-md font-semibold text-white mb-3 flex items-center justify-between"},st={class:"text-sm font-normal text-slate-500"},ot={key:0,class:"text-center py-6 text-slate-500 text-sm"},nt={key:1,class:"space-y-2 max-h-64 overflow-y-auto"},lt={class:"flex items-center gap-2"},at={class:"w-5 h-5 rounded-full bg-yellow-500/20 text-yellow-400 text-xs flex items-center justify-center font-bold"},rt={class:"font-medium text-sm"},it={class:"text-right text-xs"},dt={class:"text-slate-400"},ct={class:"text-yellow-400"},ut={key:0,class:"text-slate-500 mt-0.5"},vt={__name:"AdminDashboard",setup(x){const s=X(),u=g(!1),c=g(""),a=g(""),v=g("all"),m=g(!1),y=C(()=>{let n=s.roomList;if(a.value){const e=a.value.toLowerCase();n=n.filter(o=>o.roomId.toLowerCase().includes(e))}if(v.value!=="all")switch(v.value){case"powered-on":n=n.filter(e=>e.isPowerOn);break;case"powered-off":n=n.filter(e=>!e.isPowerOn);break;case"serving":n=n.filter(e=>e.status==="serving");break;case"waiting":n=n.filter(e=>e.status==="waiting");break}return n}),j=C(()=>s.roomList.reduce((n,e)=>n+(e.totalFee||0),0));function T(n){if(!n.isPowerOn)return"bg-slate-900/50 ring-slate-700";switch(n.status){case"serving":return"bg-green-900/30 ring-green-500/50";case"waiting":return"bg-yellow-900/30 ring-yellow-500/50";default:return"bg-slate-900/50 ring-slate-700"}}function O(n){if(!n.isPowerOn)return"bg-slate-600";switch(n.status){case"serving":return"bg-green-500 animate-pulse";case"waiting":return"bg-yellow-500 animate-pulse";default:return"bg-slate-600"}}function $(n){if(!n.isPowerOn)return`æˆ¿é—´ ${n.roomId} - å·²å…³é—­`;const e=n.status==="serving"?"æœåŠ¡ä¸­":n.status==="waiting"?"ç­‰å¾…ä¸­":"å¾…æœº",o=S(n.fanSpeed);return`æˆ¿é—´ ${n.roomId}
çŠ¶æ€: ${e}
æ¸©åº¦: ${n.currentTemp?.toFixed(1)||"--"}Â°C
é£é€Ÿ: ${o}`}function S(n){return{Low:"ä½é£",Mid:"ä¸­é£",High:"é«˜é£"}[n]||n||"--"}function A(n){if(!n)return"";try{const e=new Date(n),p=new Date-e,h=Math.floor(p/1e3/60);if(h<60)return`${h}åˆ†é’Ÿ`;{const Q=Math.floor(h/60),z=h%60;return`${Q}å°æ—¶${z}åˆ†é’Ÿ`}}catch{return""}}function R(n){if(!n)return"";try{const e=new Date(n),p=new Date-e,h=Math.floor(p/1e3);return h<60?`ç­‰å¾…${h}ç§’`:`ç­‰å¾…${Math.floor(h/60)}åˆ†é’Ÿ`}catch{return""}}async function D(){u.value=!0,c.value="";try{s.centralACStatus.isRunning?await s.stopCentralAC():await s.startCentralAC(s.centralACStatus.mode)}catch(n){c.value=n.message||"æ“ä½œå¤±è´¥"}finally{u.value=!1}}async function M(n){if(s.centralACStatus.mode!==n){u.value=!0,c.value="";try{await s.startCentralAC(n)}catch(e){c.value=e.message||"åˆ‡æ¢æ¨¡å¼å¤±è´¥"}finally{u.value=!1}}}async function f(){m.value=!0,c.value="";try{await s.initAdminData(),console.log("æ•°æ®åˆ·æ–°æˆåŠŸ")}catch(n){c.value="åˆ·æ–°å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",console.error("åˆ·æ–°å¤±è´¥:",n)}finally{m.value=!1}}return q(async()=>{console.log("ğŸ”§ ç®¡ç†å‘˜ç•Œé¢åŠ è½½..."),s.connectWebSocket();try{await s.initAdminData()}catch{c.value="åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•"}}),G(()=>{console.log("ğŸ”§ ç®¡ç†å‘˜ç•Œé¢å¸è½½"),s.disconnectWebSocket()}),(n,e)=>(d(),i("div",Y,[t("header",Z,[t("div",ee,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-2xl font-bold text-white flex items-center"},[t("svg",{class:"w-8 h-8 mr-3 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),w(" ç©ºè°ƒç®¡ç†å‘˜æ§åˆ¶å° ")]),t("p",{class:"text-slate-500 text-sm mt-1"},"å®æ—¶ç›‘æ§æ‰€æœ‰æˆ¿é—´ç©ºè°ƒçŠ¶æ€")],-1)),t("div",te,[t("div",se,[t("div",{class:b(["w-4 h-4 rounded-full",r(s).centralACStatus.isRunning?"bg-green-500 animate-pulse":"bg-slate-600"])},null,2),t("span",oe," ä¸­å¤®ç©ºè°ƒ: "+l(r(s).centralACStatus.isRunning?"è¿è¡Œä¸­":"å·²å…³é—­"),1)]),e[6]||(e[6]=t("div",{class:"w-px h-8 bg-slate-600"},null,-1)),t("div",ne,[t("button",{onClick:e[0]||(e[0]=o=>M("Cooling")),disabled:!r(s).centralACStatus.isRunning||u.value,class:b(["px-3 py-1.5 rounded-lg text-sm font-medium transition",r(s).centralACStatus.mode==="Cooling"&&r(s).centralACStatus.isRunning?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600","disabled:opacity-50 disabled:cursor-not-allowed"])}," â„ï¸ åˆ¶å†· ",10,le),t("button",{onClick:e[1]||(e[1]=o=>M("Heating")),disabled:!r(s).centralACStatus.isRunning||u.value,class:b(["px-3 py-1.5 rounded-lg text-sm font-medium transition",r(s).centralACStatus.mode==="Heating"&&r(s).centralACStatus.isRunning?"bg-orange-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600","disabled:opacity-50 disabled:cursor-not-allowed"])}," ğŸ”¥ åˆ¶çƒ­ ",10,ae)]),e[7]||(e[7]=t("div",{class:"w-px h-8 bg-slate-600"},null,-1)),t("button",{onClick:D,disabled:u.value,class:b(["px-4 py-2 rounded-lg font-semibold text-white transition","disabled:opacity-50 disabled:cursor-not-allowed",r(s).centralACStatus.isRunning?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"])},[u.value?(d(),i("span",ie,[...e[5]||(e[5]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1),w(" å¤„ç†ä¸­... ",-1)])])):(d(),i("span",de,l(r(s).centralACStatus.isRunning?"å…³é—­ç³»ç»Ÿ":"å¯åŠ¨ç³»ç»Ÿ"),1))],10,re)])]),r(s).isConnected?I("",!0):(d(),i("div",ce,[...e[9]||(e[9]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),t("span",null,"å®æ—¶è¿æ¥æ–­å¼€ï¼Œæ•°æ®å¯èƒ½ä¸æ˜¯æœ€æ–°",-1)])])),c.value?(d(),i("div",ue,[t("div",ve,[e[10]||(e[10]=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,l(c.value),1)]),t("button",{onClick:e[2]||(e[2]=o=>c.value=""),class:"text-red-400 hover:text-red-300"},[...e[11]||(e[11]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):I("",!0)]),t("div",ge,[t("div",me,[e[12]||(e[12]=t("div",{class:"text-slate-500 text-sm"},"æ€»æˆ¿é—´æ•°",-1)),t("div",fe,l(r(s).roomList.length),1)]),t("div",xe,[e[13]||(e[13]=t("div",{class:"text-slate-500 text-sm"},"å·²å¼€æœº",-1)),t("div",pe,l(r(s).activeRoomCount),1)]),t("div",he,[e[14]||(e[14]=t("div",{class:"text-slate-500 text-sm"},"æœåŠ¡ä¸­",-1)),t("div",we,l(r(s).servingRoomCount)+" / "+l(r(s).centralACStatus.maxServing),1)]),t("div",be,[e[15]||(e[15]=t("div",{class:"text-slate-500 text-sm"},"ç­‰å¾…ä¸­",-1)),t("div",ye,l(r(s).waitingRoomCount),1)]),t("div",_e,[e[16]||(e[16]=t("div",{class:"text-slate-500 text-sm"},"æ€»æ”¶å…¥",-1)),t("div",ke,"Â¥"+l(j.value.toFixed(2)),1)])]),t("div",Ce,[t("div",Se,[t("div",Ie,[t("div",Ae,[t("h2",Re,[e[17]||(e[17]=t("svg",{class:"w-5 h-5 mr-2 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)),e[18]||(e[18]=w(" æˆ¿é—´çŠ¶æ€æ€»è§ˆ ",-1)),t("span",Me,"("+l(y.value.length)+" / "+l(r(s).roomList.length)+")",1)]),t("div",Le,[t("div",je,[P(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>a.value=o),type:"text",placeholder:"æœç´¢æˆ¿é—´å·...",class:"w-32 px-3 py-1.5 bg-slate-900 border border-slate-700 rounded-lg text-sm text-slate-300 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500"},null,512),[[U,a.value]]),a.value?I("",!0):(d(),i("svg",Te,[...e[19]||(e[19]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])]))]),P(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>v.value=o),class:"px-3 py-1.5 bg-slate-900 border border-slate-700 rounded-lg text-sm text-slate-300 focus:outline-none focus:ring-2 focus:ring-cyan-500"},[...e[20]||(e[20]=[N('<option value="all" data-v-24a7220e>å…¨éƒ¨æˆ¿é—´</option><option value="powered-on" data-v-24a7220e>å·²å¼€æœº</option><option value="powered-off" data-v-24a7220e>å·²å…³é—­</option><option value="serving" data-v-24a7220e>æœåŠ¡ä¸­</option><option value="waiting" data-v-24a7220e>ç­‰å¾…ä¸­</option>',5)])],512),[[J,v.value]]),t("button",{onClick:f,disabled:m.value,class:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",title:"åˆ·æ–°æ•°æ®"},[(d(),i("svg",{class:b(["w-4 h-4",m.value&&"animate-spin"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[21]||(e[21]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),e[22]||(e[22]=t("span",{class:"hidden sm:inline"},"åˆ·æ–°",-1))],8,Oe)])]),r(s).isLoading?(d(),i("div",$e,[...e[23]||(e[23]=[t("svg",{class:"animate-spin h-8 w-8 text-cyan-400",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1),t("span",{class:"ml-3 text-slate-400"},"åŠ è½½ä¸­...",-1)])])):y.value.length>0?(d(),i("div",De,[(d(!0),i(B,null,E(y.value,o=>(d(),i("div",{key:o.roomId,class:b(["p-2 rounded-lg text-center cursor-pointer transition-all hover:scale-105","ring-1",T(o)]),title:$(o)},[t("div",Ee,l(o.roomId),1),t("div",Ve,[t("div",{class:b(["w-2 h-2 rounded-full",O(o)])},null,2)]),o.isPowerOn?(d(),i("div",Qe,l(o.currentTemp?.toFixed(1)||"--")+"Â° ",1)):(d(),i("div",Ne," -- "))],10,Be))),128))])):(d(),i("div",Pe,[...e[24]||(e[24]=[t("svg",{class:"w-16 h-16 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("p",{class:"text-lg"},"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æˆ¿é—´",-1),t("p",{class:"text-sm mt-2"},"å°è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶æˆ–æœç´¢å…³é”®è¯",-1)])])),e[25]||(e[25]=N('<div class="flex flex-wrap gap-4 mt-4 pt-4 border-t border-slate-700 text-xs text-slate-500" data-v-24a7220e><div class="flex items-center gap-1" data-v-24a7220e><div class="w-2 h-2 rounded-full bg-green-500" data-v-24a7220e></div><span data-v-24a7220e>æœåŠ¡ä¸­</span></div><div class="flex items-center gap-1" data-v-24a7220e><div class="w-2 h-2 rounded-full bg-yellow-500" data-v-24a7220e></div><span data-v-24a7220e>ç­‰å¾…ä¸­</span></div><div class="flex items-center gap-1" data-v-24a7220e><div class="w-2 h-2 rounded-full bg-slate-600" data-v-24a7220e></div><span data-v-24a7220e>å·²å…³é—­</span></div></div>',1))])]),t("div",ze,[t("div",We,[t("h3",Fe,[e[26]||(e[26]=t("span",{class:"flex items-center"},[t("svg",{class:"w-4 h-4 mr-2 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),w(" æœåŠ¡é˜Ÿåˆ— ")],-1)),t("span",He,l(r(s).serviceQueue.length)+" / "+l(r(s).centralACStatus.maxServing),1)]),r(s).serviceQueue.length===0?(d(),i("div",qe," æš‚æ— æœåŠ¡ä¸­çš„æˆ¿é—´ ")):(d(),i("div",Ge,[(d(!0),i(B,null,E(r(s).serviceQueue,o=>(d(),i("div",{key:o.roomId,class:"flex items-center justify-between p-2 bg-slate-900/50 rounded-lg hover:bg-slate-900/70 transition"},[t("div",Ue,[e[27]||(e[27]=t("div",{class:"w-2 h-2 rounded-full bg-green-500 animate-pulse"},null,-1)),t("span",Je,l(o.roomId),1)]),t("div",Ke,[t("div",Xe,l(S(o.fanSpeed)),1),t("div",Ye,[w(l(o.currentTemp?.toFixed(1)||"--")+"Â°C ",1),e[28]||(e[28]=t("span",{class:"text-slate-600"},"â†’",-1)),w(" "+l(o.targetTemp?.toFixed(1)||"--")+"Â°C ",1)]),o.startTime?(d(),i("div",Ze,l(A(o.startTime)),1)):I("",!0)])]))),128))]))]),t("div",et,[t("h3",tt,[e[29]||(e[29]=t("span",{class:"flex items-center"},[t("svg",{class:"w-4 h-4 mr-2 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),w(" ç­‰å¾…é˜Ÿåˆ— ")],-1)),t("span",st,l(r(s).waitingQueue.length),1)]),r(s).waitingQueue.length===0?(d(),i("div",ot," æš‚æ— ç­‰å¾…ä¸­çš„æˆ¿é—´ ")):(d(),i("div",nt,[(d(!0),i(B,null,E(r(s).waitingQueue,(o,p)=>(d(),i("div",{key:o.roomId,class:"flex items-center justify-between p-2 bg-slate-900/50 rounded-lg hover:bg-slate-900/70 transition"},[t("div",lt,[t("div",at,l(p+1),1),t("span",rt,l(o.roomId),1)]),t("div",it,[t("div",dt,l(S(o.fanSpeed)),1),t("div",ct,"é¢„è®¡ "+l(o.waitTime||"--")+"s",1),o.requestTime?(d(),i("div",ut,l(R(o.requestTime)),1)):I("",!0)])]))),128))]))])])])]))}},mt=H(vt,[["__scopeId","data-v-24a7220e"]]);export{mt as default};

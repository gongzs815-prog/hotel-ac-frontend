# é…’åº—ç©ºè°ƒç®¡ç†ç³»ç»Ÿ - å‰åç«¯å¯¹æ¥è¯´æ˜

> ğŸ“¢ **è‡´åç«¯å¼€å‘åŒå­¦**ï¼šè¿™æ˜¯å‰ç«¯é¡¹ç›®ä»£ç å’Œæ¥å£è§„èŒƒæ–‡æ¡£ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå¼€å§‹åç«¯å¼€å‘ã€‚

---

## ğŸ“¦ è¿™æ˜¯ä»€ä¹ˆé¡¹ç›®

è¿™æ˜¯ä¸€ä¸ª**é…’åº—ç©ºè°ƒç®¡ç†ç³»ç»Ÿ**ï¼ŒåŒ…å«å››ä¸ªå‰ç«¯æ¨¡å—ï¼Œç”¨äºç®¡ç†é…’åº—çš„ä¸­å¤®ç©ºè°ƒç³»ç»Ÿå’Œæˆ¿é—´ç©ºè°ƒæœåŠ¡ã€‚

**æŠ€æœ¯æ ˆ**ï¼š
- **å‰ç«¯**ï¼šVue 3 + Pinia + Vue Router + Tailwind CSS + Socket.io
- **åç«¯**ï¼ˆéœ€è¦ä½ ä»¬å®ç°ï¼‰ï¼šä»»æ„æŠ€æœ¯æ ˆï¼Œæä¾› HTTP API + WebSocket

**ä¸šåŠ¡åœºæ™¯**ï¼š
- å®¢äººå¯ä»¥é€šè¿‡æˆ¿é—´é¢æ¿æ§åˆ¶ç©ºè°ƒï¼ˆå¼€å…³æœºã€è°ƒæ¸©åº¦ã€è°ƒé£é€Ÿï¼‰
- ç®¡ç†å‘˜ç›‘æ§æ‰€æœ‰æˆ¿é—´çŠ¶æ€ï¼Œæ§åˆ¶ä¸­å¤®ç©ºè°ƒ
- å‰å°åŠç†å…¥ä½å’Œç»“è´¦ï¼ˆä½å®¿è´¹+ç©ºè°ƒè´¹ï¼‰
- ç»ç†æŸ¥çœ‹èƒ½è€—ç»Ÿè®¡å’Œç»è¥æŠ¥è¡¨

---

## âœ… å‰ç«¯å·²å®Œæˆçš„åŠŸèƒ½

å‰ç«¯å·²ç»å®Œæˆæ‰€æœ‰å››ä¸ªæ¨¡å—çš„å¼€å‘ï¼Œ**ç•Œé¢å’Œäº¤äº’é€»è¾‘å…¨éƒ¨å®ç°**ï¼Œç­‰å¾…åç«¯æ¥å£å¯¹æ¥ã€‚

### 1ï¸âƒ£ å®¢æˆ·ç«¯æ¨¡å—ï¼ˆRoom Clientï¼‰

**è®¿é—®è·¯å¾„**ï¼š`/room/:roomId`ï¼ˆä¾‹å¦‚ï¼š`/room/301`ï¼‰

**å·²å®ç°åŠŸèƒ½**ï¼š
- âœ… ç©ºè°ƒå¼€å…³æœºæ§åˆ¶
- âœ… æ¸©åº¦è°ƒèŠ‚ï¼ˆ18-30Â°Cï¼Œæ­¥é•¿0.5Â°Cï¼‰
- âœ… é£é€Ÿåˆ‡æ¢ï¼ˆä½é£/ä¸­é£/é«˜é£ï¼‰
- âœ… å®æ—¶æ˜¾ç¤ºå½“å‰æ¸©åº¦
- âœ… å®æ—¶æ˜¾ç¤ºç´¯è®¡è´¹ç”¨
- âœ… æœåŠ¡çŠ¶æ€ç›‘æ§ï¼ˆæœåŠ¡ä¸­/ç­‰å¾…ä¸­/å·²å…³é—­ï¼‰
- âœ… WebSocket å®æ—¶é€šä¿¡

**ç•Œé¢é¢„è§ˆ**ï¼šæ·±è‰²ä¸»é¢˜ï¼Œå¡ç‰‡å¼å¸ƒå±€ï¼Œå¤§å­—æ˜¾ç¤ºæ¸©åº¦ï¼Œæ“ä½œæŒ‰é’®æ¸…æ™°

---

### 2ï¸âƒ£ ç®¡ç†å‘˜ç«¯æ¨¡å—ï¼ˆAdmin Dashboardï¼‰

**è®¿é—®è·¯å¾„**ï¼š`/admin`

**å·²å®ç°åŠŸèƒ½**ï¼š
- âœ… ä¸­å¤®ç©ºè°ƒå¯åœæ§åˆ¶
- âœ… å·¥ä½œæ¨¡å¼åˆ‡æ¢ï¼ˆåˆ¶å†·/åˆ¶çƒ­ï¼‰
- âœ… ç›‘æ§æ‰€æœ‰50ä¸ªæˆ¿é—´çš„å®æ—¶çŠ¶æ€
- âœ… æŸ¥çœ‹æœåŠ¡é˜Ÿåˆ—ï¼ˆæœ€å¤š30ä¸ªæˆ¿é—´åŒæ—¶æœåŠ¡ï¼‰
- âœ… æŸ¥çœ‹ç­‰å¾…é˜Ÿåˆ—
- âœ… å®æ—¶çŠ¶æ€æ›´æ–°ï¼ˆWebSocketï¼‰

**ç•Œé¢é¢„è§ˆ**ï¼šæ§åˆ¶å°é£æ ¼ï¼Œæˆ¿é—´å¡ç‰‡ç½‘æ ¼å¸ƒå±€ï¼ŒçŠ¶æ€å®æ—¶æ›´æ–°

---

### 3ï¸âƒ£ å‰å°è¥ä¸šå‘˜ç«¯æ¨¡å—ï¼ˆReceptionï¼‰

**è®¿é—®è·¯å¾„**ï¼š`/reception`

**å·²å®ç°åŠŸèƒ½**ï¼š
- âœ… æŸ¥çœ‹æ‰€æœ‰æˆ¿é—´åˆ—è¡¨ï¼ˆç©ºé—²/å·²å…¥ä½/æ¸…æ´ä¸­ï¼‰
- âœ… æŸ¥è¯¢å¯ç”¨æˆ¿é—´ï¼ˆæŒ‰æˆ¿å‹ç­›é€‰ï¼‰
- âœ… åŠç†å…¥ä½ç™»è®°ï¼ˆå§“åã€èº«ä»½è¯ã€ç”µè¯ã€å…¥ä½æ—¥æœŸï¼‰
- âœ… ç”Ÿæˆè´¦å•ï¼ˆä½å®¿è´¹ + ç©ºè°ƒè´¹ï¼‰
- âœ… æŸ¥çœ‹ç©ºè°ƒä½¿ç”¨è¯¦å•
- âœ… å®Œæˆç»“è´¦ï¼ˆæ”¯æŒç°é‡‘/å¾®ä¿¡/æ”¯ä»˜å®/é“¶è¡Œå¡ï¼‰

**ç•Œé¢é¢„è§ˆ**ï¼šå·¦ä¾§æˆ¿é—´åˆ—è¡¨ï¼Œå³ä¾§æ“ä½œé¢æ¿ï¼Œè¡¨å•éªŒè¯å®Œå–„

---

### 4ï¸âƒ£ é…’åº—ç»ç†ç«¯æ¨¡å—ï¼ˆManagerï¼‰

**è®¿é—®è·¯å¾„**ï¼š`/manager`

**å·²å®ç°åŠŸèƒ½**ï¼š
- âœ… æŸ¥çœ‹æ‰€æœ‰æˆ¿é—´èƒ½è€—æŠ¥è¡¨
- âœ… æ¯æ—¥èƒ½è€—è¶‹åŠ¿å›¾ï¼ˆæŸ±çŠ¶å›¾ï¼‰
- âœ… èƒ½è€—åˆ†æï¼ˆæ€»èƒ½è€—ã€æ—¥å‡èƒ½è€—ã€é«˜å³°æ—¶æ®µï¼‰
- âœ… è´¹ç”¨åˆ†æï¼ˆæ€»è´¹ç”¨ã€æ—¥å‡è´¹ç”¨ã€å¹³å‡æ¯æˆ¿è´¹ç”¨ï¼‰
- âœ… é«˜èƒ½è€—æˆ¿é—´æé†’
- âœ… æˆ¿é—´æŠ¥è¡¨æ’åºï¼ˆæŒ‰æˆ¿é—´å·/èƒ½è€—/è´¹ç”¨/æ—¶é•¿ï¼‰
- âœ… æˆ¿é—´è¯¦æƒ…å¼¹çª—ï¼ˆé£é€Ÿåˆ†å¸ƒã€ä½¿ç”¨æ—¶æ®µï¼‰

**ç•Œé¢é¢„è§ˆ**ï¼šæ•°æ®å¯è§†åŒ–ï¼Œå¡ç‰‡å¼ç»Ÿè®¡ï¼Œè¡¨æ ¼å¼æŠ¥è¡¨

---

## ğŸ”§ åç«¯éœ€è¦åšä»€ä¹ˆ

### 1. å®ç° HTTP API æ¥å£

åç«¯éœ€è¦å®ç° **23 ä¸ª HTTP æ¥å£**ï¼Œåˆ†ä¸ºå››ä¸ªæ¨¡å—ï¼š

| æ¨¡å— | æ¥å£æ•°é‡ | ä¼˜å…ˆçº§ |
|------|---------|--------|
| å®¢æˆ·ç«¯ | 6 ä¸ª | ğŸ”´ é«˜ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰ |
| ç®¡ç†å‘˜ç«¯ | 6 ä¸ª | ğŸ”´ é«˜ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰ |
| å‰å°è¥ä¸šå‘˜ç«¯ | 7 ä¸ª | ğŸŸ¡ ä¸­ |
| é…’åº—ç»ç†ç«¯ | 4 ä¸ª | ğŸŸ¡ ä¸­ |

**è¯¦ç»†æ¥å£è§„èŒƒ**ï¼šè¯·æŸ¥çœ‹ **[åç«¯å¯¹æ¥æ€»æ–‡æ¡£.md](./åç«¯å¯¹æ¥æ€»æ–‡æ¡£.md)** ğŸ“–

---

### 2. å®ç° WebSocket å®æ—¶é€šä¿¡

åç«¯éœ€è¦ä½¿ç”¨ **Socket.io** åè®®å®ç° WebSocket æœåŠ¡ï¼Œç”¨äºå®æ—¶æ¨é€æ•°æ®ã€‚

**éœ€è¦æ¨é€çš„äº‹ä»¶**ï¼š

#### å®¢æˆ·ç«¯ WebSocket äº‹ä»¶
- `temperature-update`ï¼šæ¸©åº¦æ›´æ–°ï¼ˆæ¯2ç§’æ¨é€ï¼‰
- `fee-update`ï¼šè´¹ç”¨æ›´æ–°ï¼ˆæ¯2ç§’æ¨é€ï¼‰
- `status-change`ï¼šçŠ¶æ€å˜åŒ–
- `service-started`ï¼šæœåŠ¡å¼€å§‹
- `service-stopped`ï¼šæœåŠ¡åœæ­¢

#### ç®¡ç†å‘˜ WebSocket äº‹ä»¶
- `central-ac-status`ï¼šä¸­å¤®ç©ºè°ƒçŠ¶æ€å˜åŒ–
- `queue-update`ï¼šé˜Ÿåˆ—æ›´æ–°
- `room-power-on`ï¼šæˆ¿é—´å¼€æœºé€šçŸ¥
- `room-power-off`ï¼šæˆ¿é—´å…³æœºé€šçŸ¥

**è¯¦ç»†è¯´æ˜**ï¼šè¯·æŸ¥çœ‹ **[åç«¯å¯¹æ¥æ€»æ–‡æ¡£.md](./åç«¯å¯¹æ¥æ€»æ–‡æ¡£.md)** ç¬¬6ç« èŠ‚

---

### 3. å¯åŠ¨åç«¯æœåŠ¡

**è¦æ±‚**ï¼š
- æœåŠ¡åœ°å€ï¼š`http://localhost:3000`
- API è·¯å¾„å‰ç¼€ï¼š`/api`
- éœ€è¦é…ç½® CORSï¼Œå…è®¸æ¥è‡ª `http://localhost:5173` çš„è¯·æ±‚

**ç¤ºä¾‹é…ç½®**ï¼ˆNode.js + Expressï¼‰ï¼š
```javascript
import express from 'express';
import cors from 'cors';
import { Server } from 'socket.io';

const app = express();
app.use(cors());
app.use(express.json());

const httpServer = createServer(app);
const io = new Server(httpServer, {
  cors: { origin: '*', methods: ['GET', 'POST'] }
});

httpServer.listen(3000, () => {
  console.log('Server running on http://localhost:3000');
});
```

---

## ğŸ§ª å¦‚ä½•æµ‹è¯•å‰åç«¯è”è°ƒ

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨åç«¯æœåŠ¡

```bash
# ä½ ä»¬çš„åç«¯é¡¹ç›®
cd your-backend-project
npm install
npm start

# ç¡®ä¿æœåŠ¡è¿è¡Œåœ¨ http://localhost:3000
```

---

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨å‰ç«¯é¡¹ç›®

```bash
# è¿›å…¥å‰ç«¯é¡¹ç›®ç›®å½•
cd hotel-ac-frontend

# é¦–æ¬¡è¿è¡Œéœ€è¦å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev

# å‰ç«¯ä¼šè¿è¡Œåœ¨ http://localhost:5173
```

---

### ç¬¬ä¸‰æ­¥ï¼šè®¿é—®å››ä¸ªæ¨¡å—æµ‹è¯•

| æ¨¡å— | è®¿é—®åœ°å€ | æµ‹è¯•è¦ç‚¹ |
|------|---------|---------|
| **å®¢æˆ·ç«¯** | http://localhost:5173/room/301 | å¼€å…³æœºã€è°ƒæ¸©åº¦ã€è°ƒé£é€Ÿã€æŸ¥çœ‹è´¹ç”¨ |
| **ç®¡ç†å‘˜ç«¯** | http://localhost:5173/admin | å¯åœä¸­å¤®ç©ºè°ƒã€ç›‘æ§æ‰€æœ‰æˆ¿é—´ã€æŸ¥çœ‹é˜Ÿåˆ— |
| **å‰å°è¥ä¸šå‘˜ç«¯** | http://localhost:5173/reception | å…¥ä½ç™»è®°ã€ç”Ÿæˆè´¦å•ã€ç»“è´¦é€€æˆ¿ |
| **é…’åº—ç»ç†ç«¯** | http://localhost:5173/manager | æŸ¥çœ‹èƒ½è€—æŠ¥è¡¨ã€ç»Ÿè®¡åˆ†æ |

---

### ç¬¬å››æ­¥ï¼šæµ‹è¯•æ¸…å•

#### å®¢æˆ·ç«¯æµ‹è¯•
```
âœ… æ‰“å¼€ /room/301
âœ… ç‚¹å‡»"å¼€å¯ç”µæº"ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ POST /api/ac/request-service
âœ… è°ƒèŠ‚æ¸©åº¦ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ POST /api/ac/set-temperature
âœ… åˆ‡æ¢é£é€Ÿï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ POST /api/ac/set-fan-speed
âœ… è§‚å¯Ÿæ¸©åº¦æ˜¯å¦å®æ—¶å˜åŒ–ï¼ˆWebSocket æ¨é€ï¼‰
âœ… è§‚å¯Ÿè´¹ç”¨æ˜¯å¦å®æ—¶ç´¯åŠ ï¼ˆWebSocket æ¨é€ï¼‰
âœ… ç‚¹å‡»"å…³é—­ç”µæº"ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ POST /api/ac/stop-service
```

#### ç®¡ç†å‘˜ç«¯æµ‹è¯•
```
âœ… æ‰“å¼€ /admin
âœ… ç‚¹å‡»"å¯åŠ¨ä¸­å¤®ç©ºè°ƒ"ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ POST /api/admin/central-ac/start
âœ… æŸ¥çœ‹æ‰€æœ‰æˆ¿é—´çŠ¶æ€ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ GET /api/admin/rooms
âœ… æŸ¥çœ‹æœåŠ¡é˜Ÿåˆ—ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ GET /api/admin/service-queue
âœ… å¼€å¯ä¸€ä¸ªæˆ¿é—´ç©ºè°ƒï¼Œç®¡ç†å‘˜ç«¯åº”æ”¶åˆ°å®æ—¶é€šçŸ¥ï¼ˆWebSocketï¼‰
âœ… ç‚¹å‡»"å…³é—­ä¸­å¤®ç©ºè°ƒ"ï¼Œæ‰€æœ‰æˆ¿é—´åº”è‡ªåŠ¨å…³é—­
```

#### å‰å°è¥ä¸šå‘˜ç«¯æµ‹è¯•
```
âœ… æ‰“å¼€ /reception
âœ… æŸ¥çœ‹æˆ¿é—´åˆ—è¡¨ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ GET /api/reception/rooms
âœ… åŠç†å…¥ä½ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ POST /api/reception/check-in
âœ… ç”Ÿæˆè´¦å•ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ POST /api/reception/generate-bill
âœ… å®Œæˆç»“è´¦ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ POST /api/reception/check-out
```

#### é…’åº—ç»ç†ç«¯æµ‹è¯•
```
âœ… æ‰“å¼€ /manager
âœ… æŸ¥çœ‹æˆ¿é—´æŠ¥è¡¨ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ GET /api/manager/room-reports
âœ… æŸ¥çœ‹èƒ½è€—ç»Ÿè®¡ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ GET /api/manager/energy-stats
âœ… æŸ¥çœ‹æ¯æ—¥ç»Ÿè®¡ï¼Œæ£€æŸ¥æ˜¯å¦è°ƒç”¨ GET /api/manager/daily-stats
```

---

## ğŸ“ é‡è¦æ–‡ä»¶è¯´æ˜

### 1ï¸âƒ£ `mock-server.js` - Mock æœåŠ¡å™¨ï¼ˆé‡è¦ï¼ï¼‰

**è¿™æ˜¯ä»€ä¹ˆ**ï¼š
- ä¸€ä¸ª**å¯è¿è¡Œçš„ Node.js åç«¯æ¨¡æ‹ŸæœåŠ¡å™¨**
- å·²å®ç°æ‰€æœ‰ 23 ä¸ª HTTP æ¥å£
- å·²å®ç°æ‰€æœ‰ WebSocket äº‹ä»¶
- åŒ…å«å®Œæ•´çš„ä¸šåŠ¡é€»è¾‘ï¼ˆæ¸©åº¦æ¨¡æ‹Ÿã€è´¹ç”¨ç´¯åŠ ã€é˜Ÿåˆ—ç®¡ç†ï¼‰

**å¦‚ä½•ä½¿ç”¨**ï¼š
```bash
# å¯åŠ¨ Mock Serverï¼ˆç”¨äºå‰ç«¯ç‹¬ç«‹å¼€å‘æµ‹è¯•ï¼‰
npm run mock

# è®¿é—® Mock Server
http://localhost:3000

# Mock Server æä¾›çš„åŠŸèƒ½ï¼š
âœ… 50ä¸ªæˆ¿é—´ï¼ˆ301-350ï¼‰çš„æ¨¡æ‹Ÿæ•°æ®
âœ… ä¸­å¤®ç©ºè°ƒæ§åˆ¶
âœ… æœåŠ¡é˜Ÿåˆ—ç®¡ç†ï¼ˆæœ€å¤š30ä¸ªåŒæ—¶æœåŠ¡ï¼‰
âœ… æ¸©åº¦å®æ—¶å˜åŒ–ï¼ˆæ¯2ç§’å‘ç›®æ ‡æ¸©åº¦é è¿‘ï¼‰
âœ… è´¹ç”¨å®æ—¶ç´¯åŠ ï¼ˆæ ¹æ®é£é€Ÿè®¡ç®—ï¼‰
âœ… WebSocket å®æ—¶æ¨é€
```

**å¯¹åç«¯çš„ä»·å€¼**ï¼š
- ğŸ”¥ **å¯ç›´æ¥å‚è€ƒå®ç°é€»è¾‘**ï¼ˆæ¸©åº¦å˜åŒ–ã€è´¹ç”¨è®¡ç®—ã€é˜Ÿåˆ—ç®¡ç†ï¼‰
- ğŸ”¥ **å¯å¤ç”¨éƒ¨åˆ†ä»£ç **ï¼ˆå¦‚æœä½ ä»¬ä¹Ÿç”¨ Node.jsï¼‰
- ğŸ”¥ **å¯å¯¹æ¯”æ¥å£å“åº”æ ¼å¼**ï¼Œç¡®ä¿æ ¼å¼ä¸€è‡´

---

### 2ï¸âƒ£ `åç«¯å¯¹æ¥æ€»æ–‡æ¡£.md` - å®Œæ•´æ¥å£è§„èŒƒï¼ˆå¿…è¯»ï¼ï¼‰

**è¿™æ˜¯ä»€ä¹ˆ**ï¼š
- è¶…è¿‡ 1100 è¡Œçš„å®Œæ•´åç«¯æ¥å£æ–‡æ¡£
- åŒ…å«æ‰€æœ‰ 23 ä¸ª HTTP æ¥å£çš„è¯¦ç»†è§„èŒƒ
- åŒ…å«æ‰€æœ‰ WebSocket äº‹ä»¶çš„è¯¦ç»†è¯´æ˜

**æ–‡æ¡£ç»“æ„**ï¼š
```
1. é¡¹ç›®æ¦‚è¿°
2. å¿«é€Ÿå¼€å§‹
3. æ¥å£æ±‡æ€»ï¼ˆæŒ‰æ¨¡å—åˆ†ç±»ï¼‰
4. é€šç”¨æ•°æ®æ ¼å¼
5. è¯¦ç»†æ¥å£è¯´æ˜ï¼ˆæ¯ä¸ªæ¥å£éƒ½æœ‰è¯·æ±‚/å“åº”ç¤ºä¾‹ï¼‰
6. WebSocket äº‹ä»¶è¯¦ç»†è¯´æ˜
7. æ¥å£ä¼˜å…ˆçº§ï¼ˆæ ‡æ³¨å“ªäº›å¿…é¡»å…ˆåšï¼‰
8. æµ‹è¯•è¯´æ˜ï¼ˆåŒ…å«å¸¸è§é—®é¢˜æ’æŸ¥ï¼‰
9. é™„å½•ï¼ˆæ¥å£æ¸…å•è¡¨æ ¼ã€è´¹ç”¨è®¡ç®—å…¬å¼ã€æˆ¿å‹ä»·æ ¼ç­‰ï¼‰
```

**æ¯ä¸ªæ¥å£åŒ…å«**ï¼š
- âœ… HTTP æ–¹æ³•å’Œè·¯å¾„
- âœ… è¯·æ±‚å‚æ•°ï¼ˆå¿…å¡«/å¯é€‰ï¼‰
- âœ… è¯·æ±‚ç¤ºä¾‹ï¼ˆJSONï¼‰
- âœ… æˆåŠŸå“åº”ç¤ºä¾‹
- âœ… å¤±è´¥å“åº”ç¤ºä¾‹
- âœ… ä¸šåŠ¡è§„åˆ™è¯´æ˜

---

### 3ï¸âƒ£ å…¶ä»–æ–‡æ¡£

| æ–‡æ¡£åç§° | è¯´æ˜ |
|---------|------|
| `ç®¡ç†å‘˜APIè§„èŒƒ.md` | ç®¡ç†å‘˜ç«¯æ¥å£ï¼ˆå·²æ•´åˆåˆ°æ€»æ–‡æ¡£ï¼‰ |
| `å‰å°è¥ä¸šå‘˜APIè§„èŒƒ.md` | å‰å°è¥ä¸šå‘˜ç«¯æ¥å£ï¼ˆå·²æ•´åˆåˆ°æ€»æ–‡æ¡£ï¼‰ |
| `é…’åº—ç»ç†ç«¯APIè§„èŒƒ.md` | é…’åº—ç»ç†ç«¯æ¥å£ï¼ˆå·²æ•´åˆåˆ°æ€»æ–‡æ¡£ï¼‰ |
| `é¡¹ç›®è¯´æ˜æ–‡æ¡£.md` | å‰ç«¯é¡¹ç›®ç»“æ„å’ŒæŠ€æœ¯è¯´æ˜ |
| `å¿«é€Ÿæµ‹è¯•æŒ‡å—.md` | ç®€å•çš„æµ‹è¯•è¯´æ˜ |

**å»ºè®®**ï¼šç›´æ¥çœ‹ `åç«¯å¯¹æ¥æ€»æ–‡æ¡£.md`ï¼Œå®ƒå·²ç»æ•´åˆäº†æ‰€æœ‰ä¿¡æ¯ã€‚

---

## ğŸ¯ å¼€å‘ä¼˜å…ˆçº§å»ºè®®

### ç¬¬ä¸€é˜¶æ®µï¼ˆå¿…é¡»å…ˆå®Œæˆï¼‰ğŸ”´

**ç›®æ ‡**ï¼šè®©å®¢æˆ·ç«¯å’Œç®¡ç†å‘˜ç«¯è·‘èµ·æ¥

1. **å®¢æˆ·ç«¯æ ¸å¿ƒæ¥å£**ï¼ˆ6ä¸ªï¼‰
   - POST `/api/ac/request-service` - å¼€æœº
   - POST `/api/ac/stop-service` - å…³æœº
   - POST `/api/ac/set-temperature` - è®¾ç½®æ¸©åº¦
   - POST `/api/ac/set-fan-speed` - è®¾ç½®é£é€Ÿ
   - GET `/api/ac/room-status/:roomId` - æŸ¥è¯¢çŠ¶æ€
   - GET `/api/ac/query-fee/:roomId` - æŸ¥è¯¢è´¹ç”¨

2. **ç®¡ç†å‘˜ç«¯æ ¸å¿ƒæ¥å£**ï¼ˆ4ä¸ªï¼‰
   - GET `/api/admin/central-ac/status` - è·å–ä¸­å¤®ç©ºè°ƒçŠ¶æ€
   - POST `/api/admin/central-ac/start` - å¯åŠ¨ä¸­å¤®ç©ºè°ƒ
   - POST `/api/admin/central-ac/stop` - å…³é—­ä¸­å¤®ç©ºè°ƒ
   - GET `/api/admin/rooms` - è·å–æ‰€æœ‰æˆ¿é—´çŠ¶æ€

3. **WebSocket å®æ—¶æ¨é€**
   - å®¢æˆ·ç«¯ï¼šæ¸©åº¦æ›´æ–°ã€è´¹ç”¨æ›´æ–°
   - ç®¡ç†å‘˜ï¼šé˜Ÿåˆ—æ›´æ–°ã€çŠ¶æ€å˜åŒ–

**é¢„è®¡æ—¶é—´**ï¼š2-3å¤©

---

### ç¬¬äºŒé˜¶æ®µï¼ˆå¯ä»¥ååšï¼‰ğŸŸ¡

**ç›®æ ‡**ï¼šå®Œæˆå‰å°è¥ä¸šå‘˜ç«¯å’Œé˜Ÿåˆ—ç®¡ç†

1. **å‰å°è¥ä¸šå‘˜ç«¯æ¥å£**ï¼ˆ7ä¸ªï¼‰
   - æˆ¿é—´æŸ¥è¯¢ã€å…¥ä½ç™»è®°ã€è´¦å•ç”Ÿæˆã€ç»“è´¦é€€æˆ¿

2. **ç®¡ç†å‘˜ç«¯æ‰©å±•**
   - æœåŠ¡é˜Ÿåˆ—ã€ç­‰å¾…é˜Ÿåˆ—æŸ¥è¯¢

**é¢„è®¡æ—¶é—´**ï¼š1-2å¤©

---

### ç¬¬ä¸‰é˜¶æ®µï¼ˆåæœŸä¼˜åŒ–ï¼‰ğŸŸ¢

**ç›®æ ‡**ï¼šå®Œæˆç»ç†ç«¯ç»Ÿè®¡æŠ¥è¡¨

1. **é…’åº—ç»ç†ç«¯æ¥å£**ï¼ˆ4ä¸ªï¼‰
   - æˆ¿é—´æŠ¥è¡¨ã€èƒ½è€—ç»Ÿè®¡ã€æ¯æ—¥ç»Ÿè®¡

**é¢„è®¡æ—¶é—´**ï¼š1-2å¤©

---

## ğŸ”¥ æ ¸å¿ƒä¸šåŠ¡é€»è¾‘è¯´æ˜

### è´¹ç”¨è®¡ç®—

**è´¹ç‡é…ç½®**ï¼š
```
ä½é£ï¼š0.5 å…ƒ/åˆ†é’Ÿ
ä¸­é£ï¼š0.8 å…ƒ/åˆ†é’Ÿ
é«˜é£ï¼š1.0 å…ƒ/åˆ†é’Ÿ
```

**ç´¯åŠ å…¬å¼**ï¼ˆæ¯2ç§’ï¼‰ï¼š
```
è´¹ç”¨å¢é‡ = å½“å‰è´¹ç‡ Ã— (2 / 60)

ç¤ºä¾‹ï¼ˆä¸­é£ï¼‰ï¼š
0.8 Ã— (2/60) = 0.0267 å…ƒ/2ç§’
```

**å‚è€ƒå®ç°**ï¼ˆmock-server.js:267-277ï¼‰ï¼š
```javascript
const feeIncrement = room.feeRate * (2 / 60);
room.totalFee += feeIncrement;
room.totalFee = Math.round(room.totalFee * 100) / 100;
```

---

### æ¸©åº¦å˜åŒ–

**å˜åŒ–è§„åˆ™**ï¼š
- æ¯2ç§’å‘ç›®æ ‡æ¸©åº¦é è¿‘ 10%
- æ¸©åº¦å·®å°äº 0.1Â°C æ—¶åœæ­¢å˜åŒ–

**å‚è€ƒå®ç°**ï¼ˆmock-server.js:254-265ï¼‰ï¼š
```javascript
const tempDiff = room.targetTemp - room.currentTemp;
if (Math.abs(tempDiff) > 0.1) {
  room.currentTemp += tempDiff * 0.1;  // é è¿‘10%
  room.currentTemp = Math.round(room.currentTemp * 10) / 10;

  // æ¨é€æ¸©åº¦æ›´æ–°
  io.to(`room-${roomId}`).emit('temperature-update', {
    roomId,
    currentTemp: room.currentTemp
  });
}
```

---

### æœåŠ¡é˜Ÿåˆ—ç®¡ç†

**è§„åˆ™**ï¼š
- æœ€å¤š 30 ä¸ªæˆ¿é—´åŒæ—¶æœåŠ¡
- è¶…è¿‡ 30 ä¸ªè¿›å…¥ç­‰å¾…é˜Ÿåˆ—
- å…ˆåˆ°å…ˆæœåŠ¡ï¼ˆFIFOï¼‰

**å‚è€ƒå®ç°**ï¼ˆmock-server.js:131-155ï¼‰ï¼š
```javascript
function addToServiceQueue(roomId) {
  if (currentServing < maxServing) {
    room.serviceStatus = 'serving';
    serviceQueue.push(room);
  } else {
    room.serviceStatus = 'waiting';
    room.waitTime = (waitingQueue.length + 1) * 30;
    waitingQueue.push(room);
  }
}
```

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q1: å‰ç«¯æ˜¾ç¤º"æœåŠ¡å™¨æ— å“åº”"

**åŸå› **ï¼šåç«¯æœªå¯åŠ¨æˆ–ç«¯å£ä¸å¯¹

**è§£å†³**ï¼š
- ç¡®ä¿åç«¯è¿è¡Œåœ¨ `http://localhost:3000`
- æ£€æŸ¥ CORS æ˜¯å¦é…ç½®
- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰æŸ¥çœ‹ Network é¢æ¿

---

### Q2: WebSocket è¿æ¥å¤±è´¥

**åŸå› **ï¼šåç«¯æœªå®ç° Socket.io æˆ–ç«¯å£ä¸å¯¹

**è§£å†³**ï¼š
- ç¡®ä¿ä½¿ç”¨ Socket.io åº“ï¼ˆä¸æ˜¯åŸç”Ÿ WebSocketï¼‰
- WebSocket åœ°å€åº”è¯¥æ˜¯ `http://localhost:3000`ï¼ˆä¸ HTTP åŒç«¯å£ï¼‰
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰è¿æ¥é”™è¯¯

---

### Q3: æ¥å£è¿”å› 404

**åŸå› **ï¼šè·¯ç”±è·¯å¾„ä¸å¯¹æˆ–ç¼ºå°‘ `/api` å‰ç¼€

**è§£å†³**ï¼š
- ç¡®ä¿æ‰€æœ‰æ¥å£è·¯å¾„éƒ½æœ‰ `/api` å‰ç¼€
- æ£€æŸ¥ HTTP æ–¹æ³•æ˜¯å¦æ­£ç¡®ï¼ˆGET/POSTï¼‰

---

### Q4: å¦‚ä½•è°ƒè¯• WebSocketï¼Ÿ

**æ–¹æ³•**ï¼š
- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
- åˆ‡æ¢åˆ° Network æ ‡ç­¾
- ç­›é€‰ WSï¼ˆWebSocketï¼‰
- ç‚¹å‡»è¿æ¥ï¼ŒæŸ¥çœ‹ Messages é¢æ¿
- è§‚å¯Ÿ `temperature-update`ã€`fee-update` ç­‰äº‹ä»¶

---

### Q5: å¯ä»¥ç”¨å…¶ä»–æŠ€æœ¯æ ˆå¼€å‘åç«¯å—ï¼Ÿ

**å›ç­”**ï¼šå¯ä»¥ï¼

- å‰ç«¯ä¸é™åˆ¶åç«¯æŠ€æœ¯æ ˆ
- åªè¦æä¾›ç¬¦åˆè§„èŒƒçš„ HTTP API å’Œ Socket.io WebSocket å³å¯
- æ¨èä½¿ç”¨ Node.jsï¼ˆä¸å‰ç«¯ä¸€è‡´ï¼Œå¯å‚è€ƒ mock-server.jsï¼‰
- ä¹Ÿå¯ä»¥ç”¨ Javaã€Pythonã€Go ç­‰ï¼Œé…åˆç›¸åº”çš„ Socket.io æœåŠ¡ç«¯åº“

---

## ğŸ“š æ¨èé˜…è¯»é¡ºåº

1. âœ… **README.md**ï¼ˆæœ¬æ–‡æ¡£ï¼‰- äº†è§£é¡¹ç›®æ¦‚å†µ
2. âœ… **åç«¯å¯¹æ¥æ€»æ–‡æ¡£.md** - è¯¦ç»†æ¥å£è§„èŒƒï¼ˆå¿…è¯»ï¼ï¼‰
3. âœ… **mock-server.js** - å‚è€ƒå®ç°ä»£ç 
4. â­• å…¶ä»–æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰

---

## ğŸ‰ å¼€å§‹å¼€å‘

```bash
# 1. å¯åŠ¨ Mock Server çœ‹çœ‹å‰ç«¯æ•ˆæœ
npm run mock

# 2. å¯åŠ¨å‰ç«¯
npm run dev

# 3. è®¿é—®å››ä¸ªæ¨¡å—
http://localhost:5173/room/301     # å®¢æˆ·ç«¯
http://localhost:5173/admin         # ç®¡ç†å‘˜ç«¯
http://localhost:5173/reception     # å‰å°è¥ä¸šå‘˜ç«¯
http://localhost:5173/manager       # é…’åº—ç»ç†ç«¯

# 4. æŸ¥çœ‹æ¥å£æ–‡æ¡£
cat åç«¯å¯¹æ¥æ€»æ–‡æ¡£.md

# 5. å‚è€ƒ Mock Server å®ç°
cat mock-server.js

# 6. å¼€å§‹å¼€å‘ä½ ä»¬çš„åç«¯ ğŸš€
```

---

## ğŸ’¡ æ¸©é¦¨æç¤º

- ğŸ“– **æ¥å£æ–‡æ¡£å¾ˆè¯¦ç»†**ï¼Œæ¯ä¸ªæ¥å£éƒ½æœ‰ç¤ºä¾‹ï¼Œå»ºè®®ä»”ç»†é˜…è¯»
- ğŸ”¥ **Mock Server å¯ç›´æ¥å‚è€ƒ**ï¼ŒåŒ…å«å®Œæ•´ä¸šåŠ¡é€»è¾‘
- ğŸ§ª **å»ºè®®å…ˆè·‘é€šå®¢æˆ·ç«¯**ï¼Œè¿™æ˜¯æ ¸å¿ƒåŠŸèƒ½
- ğŸ’¬ **æœ‰é—®é¢˜éšæ—¶æ²Ÿé€š**ï¼Œå‰åç«¯è”è°ƒé¡ºåˆ©æœ€é‡è¦ï¼

---

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸ‰

---

**æ–‡æ¡£ç»´æŠ¤**: gzs
**æœ€åæ›´æ–°**: 2025-11-25
**è”ç³»æ–¹å¼**: [13261936715]
